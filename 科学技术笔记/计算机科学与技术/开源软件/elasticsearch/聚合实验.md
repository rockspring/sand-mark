```
curl -XPUT 'http://localhost:9200/twitter/' -d '{
    "settings" : {
        "index" : {
            "number_of_shards" : 1,
            "number_of_replicas" : 0
        }
    }
}'

curl -XDELETE 'http://localhost:9200/twitter/'

curl -XPUT 'localhost:9200/twitter?pretty' -d'
{
    "settings" : {
        "index" : {
            "number_of_shards" : 1,
            "number_of_replicas" : 0
        }
    },
  "mappings": {
    "tweet": {
      "properties": {
        "user": {
          "type": "string",
          "index":"not_analyzed"
        },
        "message": {
          "type": "string"
        },
        "date": {
          "type": "date" 
        }
      }
    }
  }
}'

curl -XPUT 'localhost:9200/twitter/_mapping/user ?pretty' -d'
{
  "properties": {
    "name": {
      "type": "string"
    }
  }
}'

curl -XPUT 'localhost:9200/twitter/_mapping/tweet ?pretty' -d'
{
  "properties": {
    "user_name": {
      "type": "string"
    }
  }
}'


curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'

curl -XPUT 'http://localhost:9200/twitter/tweet/2' -d '{
    "user" : "leqinzhou",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'

curl -XPUT 'http://localhost:9200/twitter/tweet/3' -d '{
    "user" : "leqinzhou",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'
```


# 查询

```
curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '{
    "query":{ "match_all": {} }
}'


curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '{
    "query": {
        "term" : { "user" : "kimchy" }
    }
}'

curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '{
    "aggs" : {
        "user" : {
            "terms" : { "field" : "user" }
        }
    }
}'
```