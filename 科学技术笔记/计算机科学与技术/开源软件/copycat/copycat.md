io.atomix.copycat.server.state.ServerContext#connectServer

```
connection.handler(RegisterRequest.class, request -> state.register(request));
connection.handler(ConnectRequest.class, request -> state.connect(request, connection));
connection.handler(AcceptRequest.class, request -> state.accept(request));
connection.handler(KeepAliveRequest.class, request -> state.keepAlive(request));
connection.handler(UnregisterRequest.class, request -> state.unregister(request));
connection.handler(PublishRequest.class, request -> state.publish(request));
connection.handler(ConfigureRequest.class, request -> state.configure(request));
connection.handler(InstallRequest.class, request -> state.install(request));
connection.handler(JoinRequest.class, request -> state.join(request));
connection.handler(ReconfigureRequest.class, request -> state.reconfigure(request));
connection.handler(LeaveRequest.class, request -> state.leave(request));
connection.handler(AppendRequest.class, request -> state.append(request));
connection.handler(PollRequest.class, request -> state.poll(request));
connection.handler(VoteRequest.class, request -> state.vote(request));
connection.handler(CommandRequest.class, request -> state.command(request));
connection.handler(QueryRequest.class, request -> state.query(request));
```


<< Managed<AbstractState> >>
AbstractState
    LeaderState
    InactiveState
        ReserveState




DefaultCopycatClient创建两个线程池，每个线程池一个线程

分别如下：

```
"copycat-client-event-1" #44 prio=5 os_prio=0 tid=0x00007f9770653000 nid=0x7a38 waiting on condition [0x00007f96105f5000]
"copycat-client-io-1" #43 prio=5 os_prio=0 tid=0x00007f9770a79800 nid=0x7a37 waiting on condition [0x00007f96106f6000]
```




```
2017-05-05T16:16:17.087+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Received AppendResponse[status=OK, term=1, succeeded=true, logIndex=36936] from /10.126.87.149:8701
2017-05-05T16:16:17.089+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=36936, eventIndex=19, result=null]
2017-05-05T16:16:17.092+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=4, sequence=12066, index=36935, query=com.anjuke.search.resemble.common.copycat.QueryCommand@322a4288]
2017-05-05T16:16:17.092+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Sent AppendRequest[term=1, leader=176061172, logIndex=36936, logTerm=1, entries=[0], commitIndex=36936, globalIndex=36935] to /10.126.91.199:8701
2017-05-05T16:16:17.092+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Sent AppendRequest[term=1, leader=176061172, logIndex=36936, logTerm=1, entries=[0], commitIndex=36936, globalIndex=36935] to /10.126.87.149:8701
2017-05-05T16:16:17.092+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Received AppendResponse[status=OK, term=1, succeeded=true, logIndex=36936] from /10.126.91.199:8701
2017-05-05T16:16:17.092+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.s.state.ServerStateMachine - /10.126.85.164:8701 - Applying QueryEntry[index=36935, term=1, session=4, sequence=12066, timestamp=1493972177092, query=com.anjuke.search.resemble.common.copycat.QueryCommand@322a4288]
2017-05-05T16:16:17.092+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Received AppendResponse[status=OK, term=1, succeeded=true, logIndex=36936] from /10.126.87.149:8701
2017-05-05T16:16:17.094+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=36936, eventIndex=4, result=[]]
2017-05-05T16:16:17.097+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=9, sequence=12068, command=com.anjuke.search.resemble.common.copycat.AddCommand@28977d12]
2017-05-05T16:16:17.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=36937, term=1, session=9, sequence=12068, timestamp=1493972177097, command=com.anjuke.search.resemble.common.copycat.AddCommand@28977d12] to log at index 36937
2017-05-05T16:16:17.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Sent AppendRequest[term=1, leader=176061172, logIndex=36936, logTerm=1, entries=[1], commitIndex=36936, globalIndex=36936] to /10.126.91.199:8701
2017-05-05T16:16:17.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Sent AppendRequest[term=1, leader=176061172, logIndex=36936, logTerm=1, entries=[1], commitIndex=36936, globalIndex=36936] to /10.126.87.149:8701
2017-05-05T16:16:17.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Received AppendResponse[status=OK, term=1, succeeded=true, logIndex=36937] from /10.126.91.199:8701
2017-05-05T16:16:17.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.s.state.ServerStateMachine - /10.126.85.164:8701 - Applying CommandEntry[index=36937, term=1, session=9, sequence=12068, timestamp=1493972177097, command=com.anjuke.search.resemble.common.copycat.AddCommand@28977d12]
2017-05-05T16:16:17.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Received AppendResponse[status=OK, term=1, succeeded=true, logIndex=36937] from /10.126.87.149:8701
2017-05-05T16:16:17.099+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=36937, eventIndex=9, result=null]
2017-05-05T16:16:17.103+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=12076, index=36936, query=com.anjuke.search.resemble.common.copycat.QueryCommand@49dab164]
2017-05-05T16:16:17.103+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Sent AppendRequest[term=1, leader=176061172, logIndex=36937, logTerm=1, entries=[0], commitIndex=36937, globalIndex=36936] to /10.126.91.199:8701
2017-05-05T16:16:17.103+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderAppender - /10.126.85.164:8701 - Sent AppendRequest[term=1, leader=176061172, logIndex=36937, logTerm=1, entries=[0], commitIndex=36937, globalIndex=36936] to /10.126.87.149:8701
```



发生角色切换

```
2017-05-05T16:35:28.962+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129230, eventIndex=19, result=[]]
2017-05-05T16:35:28.965+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42356, command=com.anjuke.search.resemble.common.copycat.AddCommand@26c30d06]
2017-05-05T16:35:28.965+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129231, term=1, session=4, sequence=42356, timestamp=1493973328965, command=com.anjuke.search.resemble.common.copycat.AddCommand@26c30d06] to log at index 129231
2017-05-05T16:35:28.969+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129231, eventIndex=4, result=null]
2017-05-05T16:35:28.972+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=9, sequence=42401, index=129230, query=com.anjuke.search.resemble.common.copycat.QueryCommand@36e7d677]
2017-05-05T16:35:28.974+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129231, eventIndex=9, result=[24425:comm_weakness]]
2017-05-05T16:35:28.977+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=42366, index=129230, query=com.anjuke.search.resemble.common.copycat.QueryCommand@8f24690]
2017-05-05T16:35:28.979+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129231, eventIndex=19, result=[]]
2017-05-05T16:35:28.982+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42357, command=com.anjuke.search.resemble.common.copycat.AddCommand@958cb7d]
2017-05-05T16:35:28.982+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129232, term=1, session=4, sequence=42357, timestamp=1493973328982, command=com.anjuke.search.resemble.common.copycat.AddCommand@958cb7d] to log at index 129232
2017-05-05T16:35:28.984+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129232, eventIndex=4, result=null]
2017-05-05T16:35:28.987+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=9, sequence=42401, index=129231, query=com.anjuke.search.resemble.common.copycat.QueryCommand@25393685]
2017-05-05T16:35:28.989+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129232, eventIndex=9, result=[]]
2017-05-05T16:35:28.993+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=19, sequence=42367, command=com.anjuke.search.resemble.common.copycat.AddCommand@6af5027c]
2017-05-05T16:35:28.993+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129233, term=1, session=19, sequence=42367, timestamp=1493973328993, command=com.anjuke.search.resemble.common.copycat.AddCommand@6af5027c] to log at index 129233
2017-05-05T16:35:28.995+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129233, eventIndex=19, result=null]
2017-05-05T16:35:28.999+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=4, sequence=42357, index=129232, query=com.anjuke.search.resemble.common.copycat.QueryCommand@6fc6e9c4]
2017-05-05T16:35:29.001+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129233, eventIndex=4, result=[]]
2017-05-05T16:35:29.004+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=9, sequence=42402, command=com.anjuke.search.resemble.common.copycat.AddCommand@2de2f0a2]
2017-05-05T16:35:29.004+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129234, term=1, session=9, sequence=42402, timestamp=1493973329004, command=com.anjuke.search.resemble.common.copycat.AddCommand@2de2f0a2] to log at index 129234
2017-05-05T16:35:29.006+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129234, eventIndex=9, result=null]
2017-05-05T16:35:29.009+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=42367, index=129233, query=com.anjuke.search.resemble.common.copycat.QueryCommand@36353888]
2017-05-05T16:35:29.012+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129234, eventIndex=19, result=[]]
2017-05-05T16:35:29.015+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42358, command=com.anjuke.search.resemble.common.copycat.AddCommand@c68a90c]
2017-05-05T16:35:29.015+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129235, term=1, session=4, sequence=42358, timestamp=1493973329015, command=com.anjuke.search.resemble.common.copycat.AddCommand@c68a90c] to log at index 129235
2017-05-05T16:35:29.018+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129235, eventIndex=4, result=null]
2017-05-05T16:35:29.021+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=9, sequence=42402, index=129234, query=com.anjuke.search.resemble.common.copycat.QueryCommand@5d743ba3]
2017-05-05T16:35:29.023+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129235, eventIndex=9, result=[]]
2017-05-05T16:35:29.026+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=19, sequence=42368, command=com.anjuke.search.resemble.common.copycat.AddCommand@149dd9c8]
2017-05-05T16:35:29.026+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129236, term=1, session=19, sequence=42368, timestamp=1493973329026, command=com.anjuke.search.resemble.common.copycat.AddCommand@149dd9c8] to log at index 129236
2017-05-05T16:35:29.028+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129236, eventIndex=19, result=null]
2017-05-05T16:35:29.032+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=4, sequence=42358, index=129235, query=com.anjuke.search.resemble.common.copycat.QueryCommand@3ac446fd]
2017-05-05T16:35:29.034+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129236, eventIndex=4, result=[]]
2017-05-05T16:35:29.037+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=9, sequence=42403, command=com.anjuke.search.resemble.common.copycat.AddCommand@40ed8bf4]
2017-05-05T16:35:29.037+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129237, term=1, session=9, sequence=42403, timestamp=1493973329037, command=com.anjuke.search.resemble.common.copycat.AddCommand@40ed8bf4] to log at index 129237
2017-05-05T16:35:29.039+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129237, eventIndex=9, result=null]
2017-05-05T16:35:29.043+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=42368, index=129236, query=com.anjuke.search.resemble.common.copycat.QueryCommand@2077bc44]
2017-05-05T16:35:29.045+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129237, eventIndex=19, result=[]]
2017-05-05T16:35:29.048+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42359, command=com.anjuke.search.resemble.common.copycat.AddCommand@ce92195]
2017-05-05T16:35:29.049+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129238, term=1, session=4, sequence=42359, timestamp=1493973329048, command=com.anjuke.search.resemble.common.copycat.AddCommand@ce92195] to log at index 129238
2017-05-05T16:35:29.051+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129238, eventIndex=4, result=null]
2017-05-05T16:35:29.054+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=9, sequence=42403, index=129237, query=com.anjuke.search.resemble.common.copycat.QueryCommand@3d81904f]
2017-05-05T16:35:29.058+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129238, eventIndex=9, result=[]]
2017-05-05T16:35:29.062+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=19, sequence=42369, command=com.anjuke.search.resemble.common.copycat.AddCommand@7821fbe3]
2017-05-05T16:35:29.062+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129239, term=1, session=19, sequence=42369, timestamp=1493973329062, command=com.anjuke.search.resemble.common.copycat.AddCommand@7821fbe3] to log at index 129239
2017-05-05T16:35:29.066+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129239, eventIndex=19, result=null]
2017-05-05T16:35:29.069+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=4, sequence=42359, index=129238, query=com.anjuke.search.resemble.common.copycat.QueryCommand@d0dd571]
2017-05-05T16:35:29.072+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129239, eventIndex=4, result=[]]
2017-05-05T16:35:29.075+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=9, sequence=42404, command=com.anjuke.search.resemble.common.copycat.AddCommand@7a84c9d0]
2017-05-05T16:35:29.075+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129240, term=1, session=9, sequence=42404, timestamp=1493973329075, command=com.anjuke.search.resemble.common.copycat.AddCommand@7a84c9d0] to log at index 129240
2017-05-05T16:35:29.078+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129240, eventIndex=9, result=null]
2017-05-05T16:35:29.081+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=42369, index=129239, query=com.anjuke.search.resemble.common.copycat.QueryCommand@3fff979d]
2017-05-05T16:35:29.085+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129240, eventIndex=19, result=[]]
2017-05-05T16:35:29.089+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42360, command=com.anjuke.search.resemble.common.copycat.AddCommand@636903fb]
2017-05-05T16:35:29.089+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129241, term=1, session=4, sequence=42360, timestamp=1493973329089, command=com.anjuke.search.resemble.common.copycat.AddCommand@636903fb] to log at index 129241
2017-05-05T16:35:29.093+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129241, eventIndex=4, result=null]
2017-05-05T16:35:29.096+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=9, sequence=42404, index=129240, query=com.anjuke.search.resemble.common.copycat.QueryCommand@6720630b]
2017-05-05T16:35:29.098+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129241, eventIndex=9, result=[]]
2017-05-05T16:35:29.101+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=19, sequence=42370, command=com.anjuke.search.resemble.common.copycat.AddCommand@4cfdd2cf]
2017-05-05T16:35:29.102+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129242, term=1, session=19, sequence=42370, timestamp=1493973329101, command=com.anjuke.search.resemble.common.copycat.AddCommand@4cfdd2cf] to log at index 129242
2017-05-05T16:35:29.104+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129242, eventIndex=19, result=null]
2017-05-05T16:35:29.107+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=4, sequence=42360, index=129241, query=com.anjuke.search.resemble.common.copycat.QueryCommand@454cbd4e]
2017-05-05T16:35:29.110+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129242, eventIndex=4, result=[]]
2017-05-05T16:35:29.113+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=9, sequence=42405, command=com.anjuke.search.resemble.common.copycat.AddCommand@67856482]
2017-05-05T16:35:29.113+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129243, term=1, session=9, sequence=42405, timestamp=1493973329113, command=com.anjuke.search.resemble.common.copycat.AddCommand@67856482] to log at index 129243
2017-05-05T16:35:29.115+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129243, eventIndex=9, result=null]
2017-05-05T16:35:29.118+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=42370, index=129242, query=com.anjuke.search.resemble.common.copycat.QueryCommand@b57ffba]
2017-05-05T16:35:29.121+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129243, eventIndex=19, result=[]]
2017-05-05T16:35:29.124+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42361, command=com.anjuke.search.resemble.common.copycat.AddCommand@47ba3b26]
2017-05-05T16:35:29.124+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129244, term=1, session=4, sequence=42361, timestamp=1493973329124, command=com.anjuke.search.resemble.common.copycat.AddCommand@47ba3b26] to log at index 129244
2017-05-05T16:35:29.126+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129244, eventIndex=4, result=null]
2017-05-05T16:35:29.129+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=9, sequence=42405, index=129243, query=com.anjuke.search.resemble.common.copycat.QueryCommand@63199642]
2017-05-05T16:35:29.132+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129244, eventIndex=9, result=[]]
2017-05-05T16:35:29.135+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=19, sequence=42371, command=com.anjuke.search.resemble.common.copycat.AddCommand@756cf20c]
2017-05-05T16:35:29.135+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129245, term=1, session=19, sequence=42371, timestamp=1493973329135, command=com.anjuke.search.resemble.common.copycat.AddCommand@756cf20c] to log at index 129245
2017-05-05T16:35:29.138+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129245, eventIndex=19, result=null]
2017-05-05T16:35:29.141+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=4, sequence=42361, index=129244, query=com.anjuke.search.resemble.common.copycat.QueryCommand@1b372620]
2017-05-05T16:35:29.143+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129245, eventIndex=4, result=[]]
2017-05-05T16:35:29.145+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=9, sequence=42406, command=com.anjuke.search.resemble.common.copycat.AddCommand@9d95bd8]
2017-05-05T16:35:29.145+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129246, term=1, session=9, sequence=42406, timestamp=1493973329145, command=com.anjuke.search.resemble.common.copycat.AddCommand@9d95bd8] to log at index 129246
2017-05-05T16:35:29.147+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129246, eventIndex=9, result=null]
2017-05-05T16:35:29.150+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received QueryRequest[session=19, sequence=42371, index=129245, query=com.anjuke.search.resemble.common.copycat.QueryCommand@4f9b395b]
2017-05-05T16:35:29.152+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent QueryResponse[status=OK, index=129246, eventIndex=19, result=[]]
2017-05-05T16:35:29.154+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received KeepAliveRequest[session=9, commandSequence=42406, eventIndex=9]
2017-05-05T16:35:29.154+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended KeepAliveEntry[index=129247, term=1, session=9, commandSequence=42406, eventIndex=9, timestamp=1493973329154]
2017-05-05T16:35:29.155+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent KeepAliveResponse[status=OK, error=null, leader=/10.126.85.164:8701, members=[/10.126.91.199:8701, /10.126.85.164:8701, /10.126.87.149:8701]]
2017-05-05T16:35:29.155+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received CommandRequest[session=4, sequence=42362, command=com.anjuke.search.resemble.common.copycat.AddCommand@cdfbceb]
2017-05-05T16:35:29.155+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended CommandEntry[index=129248, term=1, session=4, sequence=42362, timestamp=1493973329155, command=com.anjuke.search.resemble.common.copycat.AddCommand@cdfbceb] to log at index 129248
2017-05-05T16:35:31.701+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent CommandResponse[status=OK, index=129248, eventIndex=4, result=null]
2017-05-05T16:35:31.701+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received KeepAliveRequest[session=4, commandSequence=42361, eventIndex=4]
2017-05-05T16:35:31.701+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended KeepAliveEntry[index=129249, term=1, session=4, commandSequence=42361, eventIndex=4, timestamp=1493973331701]
2017-05-05T16:35:31.701+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received AcceptRequest[client=e2fe2762-a409-49be-b3c3-ed17f76b52cb, address=/10.126.87.149:8701]
2017-05-05T16:35:31.701+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Appended ConnectEntry[index=129250, term=1, client=e2fe2762-a409-49be-b3c3-ed17f76b52cb, address=/10.126.87.149:8701, timestamp=1493973331701]
2017-05-05T16:35:31.701+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received PollRequest[term=1, candidate=176062743, logIndex=129248, logTerm=1]
2017-05-05T16:35:31.702+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent PollResponse[status=OK, term=1, accepted=false]
2017-05-05T16:35:31.703+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received greater term
2017-05-05T16:35:31.704+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Cancelling append timer
2017-05-05T16:35:31.704+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Received VoteRequest[term=2, candidate=176062743, logIndex=129248, logTerm=1]
2017-05-05T16:35:31.706+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Rejected VoteRequest[term=2, candidate=176062743, logIndex=129248, logTerm=1]: candidate's last log entry (129248) is at a lower index than the local log (129250)
2017-05-05T16:35:31.707+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.LeaderState - /10.126.85.164:8701 - Sent VoteResponse[status=OK, term=2, voted=false]
```

角色从LeaderState切换到FollowerState

```
2017-05-05T16:06:16.174+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Starting heartbeat timer
2017-05-05T16:06:16.936+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Heartbeat timed out in PT0.762S
2017-05-05T16:06:16.941+08:00 [copycat-server-/10.126.85.164:8701-copycat] INFO  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling members [ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null]]
2017-05-05T16:06:16.941+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null] for next term 1
2017-05-05T16:06:16.945+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null] for next term 1
2017-05-05T16:06:17.687+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Failed to poll a majority of the cluster in PT0.75S
2017-05-05T16:06:19.065+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Heartbeat timed out in PT1.377S
2017-05-05T16:06:19.065+08:00 [copycat-server-/10.126.85.164:8701-copycat] INFO  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling members [ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null]]
2017-05-05T16:06:19.065+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null] for next term 1
2017-05-05T16:06:19.065+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null] for next term 1
2017-05-05T16:06:19.815+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Failed to poll a majority of the cluster in PT0.75S
2017-05-05T16:06:21.102+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Heartbeat timed out in PT1.287S
2017-05-05T16:06:21.102+08:00 [copycat-server-/10.126.85.164:8701-copycat] INFO  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling members [ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null]]
2017-05-05T16:06:21.102+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null] for next term 1
2017-05-05T16:06:21.103+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null] for next term 1
2017-05-05T16:06:21.852+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Failed to poll a majority of the cluster in PT0.75S
2017-05-05T16:06:21.911+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received JoinRequest[member=ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701]]
2017-05-05T16:06:21.915+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent JoinResponse[status=ERROR, index=0, term=0, timestamp=0, members=null]
2017-05-05T16:06:22.609+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Heartbeat timed out in PT0.756S
2017-05-05T16:06:22.609+08:00 [copycat-server-/10.126.85.164:8701-copycat] INFO  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling members [ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null]]
2017-05-05T16:06:22.609+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null] for next term 1
2017-05-05T16:06:22.611+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=null] for next term 1
2017-05-05T16:06:22.614+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received accepted poll from ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=null]
2017-05-05T16:06:22.615+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Cancelling heartbeat timer
2017-05-05T16:35:31.704+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Starting heartbeat timer
2017-05-05T16:35:31.707+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received ConfigureRequest[term=2, leader=176062743, index=129249, timestamp=1493973330287, members=[ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.85.164:8701, clientAddress=/10.126.85.164:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701]]]
2017-05-05T16:35:31.708+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent ConfigureResponse[status=OK]
2017-05-05T16:35:31.708+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received PollRequest[term=2, candidate=176061669, logIndex=129249, logTerm=2]
2017-05-05T16:35:31.708+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Accepted PollRequest[term=2, candidate=176061669, logIndex=129249, logTerm=2]: candidate's log is up-to-date
2017-05-05T16:35:31.708+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent PollResponse[status=OK, term=2, accepted=true]
2017-05-05T16:35:31.708+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received KeepAliveRequest[session=9, commandSequence=42406, eventIndex=9]
2017-05-05T16:35:31.718+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received VoteRequest[term=3, candidate=176061669, logIndex=129249, logTerm=2]
2017-05-05T16:35:31.718+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Accepted VoteRequest[term=3, candidate=176061669, logIndex=129249, logTerm=2]: candidate's log is up-to-date
2017-05-05T16:35:31.719+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent VoteResponse[status=OK, term=3, voted=true]
2017-05-05T16:35:31.772+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received ConfigureRequest[term=3, leader=176061669, index=129250, timestamp=1493973331740, members=[ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.85.164:8701, clientAddress=/10.126.85.164:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701]]]
2017-05-05T16:35:31.773+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent ConfigureResponse[status=OK]
2017-05-05T16:35:31.774+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received ConnectRequest[client=86631390-b6ff-4ca3-a307-0eccf3c45fbe]
2017-05-05T16:35:31.784+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129249, logTerm=2, entries=[1], commitIndex=129247, globalIndex=129246]
2017-05-05T16:35:31.784+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Rejected AppendRequest[term=3, leader=176061669, logIndex=129249, logTerm=2, entries=[1], commitIndex=129247, globalIndex=129246]: Request log term does not match local log term 1 for the same entry
2017-05-05T16:35:31.785+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=false, logIndex=129248]
2017-05-05T16:35:31.787+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129250, logTerm=3, entries=[1], commitIndex=129247, globalIndex=129246]
2017-05-05T16:35:31.787+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Rejected AppendRequest[term=3, leader=176061669, logIndex=129250, logTerm=3, entries=[1], commitIndex=129247, globalIndex=129246]: Request log term does not match local log term 1 for the same entry
2017-05-05T16:35:31.787+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=false, logIndex=129249]
2017-05-05T16:35:31.788+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129248, logTerm=1, entries=[3], commitIndex=129247, globalIndex=129246]
2017-05-05T16:35:31.788+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended entry term does not match local log, removing incorrect entries
2017-05-05T16:35:31.791+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConfigurationEntry[index=129249, term=2, timestamp=1493973330287, members=[ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.85.164:8701, clientAddress=/10.126.85.164:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701]]] to log at index 129249
2017-05-05T16:35:31.791+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConfigurationEntry[index=129250, term=3, timestamp=1493973331740, members=[ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.85.164:8701, clientAddress=/10.126.85.164:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701]]] to log at index 129250
2017-05-05T16:35:31.791+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129251, term=3, client=86631390-b6ff-4ca3-a307-0eccf3c45fbe, address=/10.126.85.164:8701, timestamp=1493973331797] to log at index 129251
2017-05-05T16:35:31.791+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129251]
2017-05-05T16:35:32.211+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent KeepAliveResponse[status=ERROR, error=NO_LEADER_ERROR, leader=null, members=null]
2017-05-05T16:35:32.391+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent ConnectResponse[status=ERROR, leader=null, members=null]
2017-05-05T16:35:32.751+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Heartbeat timed out in PT0.959S
2017-05-05T16:35:32.751+08:00 [copycat-server-/10.126.85.164:8701-copycat] INFO  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling members [ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701]]
2017-05-05T16:35:32.751+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701] for next term 4
2017-05-05T16:35:32.751+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Polling ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701] for next term 4
2017-05-05T16:35:33.391+08:00 [copycat-server-/10.126.85.164:8701-copycat] WARN  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - request timed out
2017-05-05T16:35:33.461+08:00 [copycat-server-/10.126.85.164:8701-copycat] WARN  i.a.c.server.state.FollowerState - /10.126.85.164:8701 - request timed out
2017-05-05T16:35:33.906+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received ConnectRequest[client=86631390-b6ff-4ca3-a307-0eccf3c45fbe]
2017-05-05T16:35:33.906+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent ConnectResponse[status=ERROR, leader=null, members=null]
2017-05-05T16:35:33.922+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received ConfigureRequest[term=2, leader=176062743, index=129249, timestamp=1493973330287, members=[ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.91.199:8701, clientAddress=/10.126.91.199:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.85.164:8701, clientAddress=/10.126.85.164:8701], ServerMember[type=ACTIVE, status=AVAILABLE, serverAddress=/10.126.87.149:8701, clientAddress=/10.126.87.149:8701]]]
2017-05-05T16:35:33.923+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent ConfigureResponse[status=OK]
2017-05-05T16:35:34.222+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received ConnectRequest[client=4c066ee7-c122-43ff-ab8d-a91b4fb315f8]
2017-05-05T16:35:34.222+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent ConnectResponse[status=ERROR, leader=null, members=null]
2017-05-05T16:35:34.397+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129249, logTerm=2, entries=[2], commitIndex=129251, globalIndex=129246]
2017-05-05T16:35:34.399+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129251]
2017-05-05T16:35:34.399+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129251, logTerm=3, entries=[0], commitIndex=129251, globalIndex=129246]
2017-05-05T16:35:34.399+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129251]
2017-05-05T16:35:34.414+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129251, logTerm=3, entries=[9], commitIndex=129251, globalIndex=129246]
2017-05-05T16:35:34.414+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended KeepAliveEntry[index=129252, term=3, session=9, commandSequence=42406, eventIndex=9, timestamp=1493973334408] to log at index 129252
2017-05-05T16:35:34.414+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129253, term=3, client=86631390-b6ff-4ca3-a307-0eccf3c45fbe, address=/10.126.91.199:8701, timestamp=1493973334409] to log at index 129253
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129254, term=3, client=e2fe2762-a409-49be-b3c3-ed17f76b52cb, address=/10.126.91.199:8701, timestamp=1493973334410] to log at index 129254
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129255, term=3, client=4c066ee7-c122-43ff-ab8d-a91b4fb315f8, address=/10.126.91.199:8701, timestamp=1493973334410] to log at index 129255
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129256, term=3, client=4c066ee7-c122-43ff-ab8d-a91b4fb315f8, address=/10.126.91.199:8701, timestamp=1493973334410] to log at index 129256
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129257, term=3, client=86631390-b6ff-4ca3-a307-0eccf3c45fbe, address=/10.126.91.199:8701, timestamp=1493973334410] to log at index 129257
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129258, term=3, client=e2fe2762-a409-49be-b3c3-ed17f76b52cb, address=/10.126.91.199:8701, timestamp=1493973334410] to log at index 129258
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129259, term=3, client=e2fe2762-a409-49be-b3c3-ed17f76b52cb, address=/10.126.87.149:8701, timestamp=1493973334411] to log at index 129259
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129260, term=3, client=4c066ee7-c122-43ff-ab8d-a91b4fb315f8, address=/10.126.87.149:8701, timestamp=1493973334412] to log at index 129260
2017-05-05T16:35:34.415+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129260]
2017-05-05T16:35:34.418+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129260, logTerm=3, entries=[2], commitIndex=129260, globalIndex=129246]
2017-05-05T16:35:34.418+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129261, term=3, client=e2fe2762-a409-49be-b3c3-ed17f76b52cb, address=/10.126.87.149:8701, timestamp=1493973334424] to log at index 129261
2017-05-05T16:35:34.418+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended UnregisterEntry[index=129262, term=3, session=4, expired=true, timestamp=1493973334428] to log at index 129262
2017-05-05T16:35:34.419+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129262]
2017-05-05T16:35:34.430+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129262, logTerm=3, entries=[1], commitIndex=129262, globalIndex=129246]
2017-05-05T16:35:34.430+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129263, term=3, client=86631390-b6ff-4ca3-a307-0eccf3c45fbe, address=/10.126.87.149:8701, timestamp=1493973334440] to log at index 129263
2017-05-05T16:35:34.431+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129263]
2017-05-05T16:35:34.432+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129263, logTerm=3, entries=[1], commitIndex=129263, globalIndex=129246]
2017-05-05T16:35:34.432+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129264, term=3, client=4c066ee7-c122-43ff-ab8d-a91b4fb315f8, address=/10.126.87.149:8701, timestamp=1493973334441] to log at index 129264
2017-05-05T16:35:34.432+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129264]
2017-05-05T16:35:34.433+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129264, logTerm=3, entries=[1], commitIndex=129264, globalIndex=129246]
2017-05-05T16:35:34.433+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended KeepAliveEntry[index=129265, term=3, session=9, commandSequence=42406, eventIndex=9, timestamp=1493973334443] to log at index 129265
2017-05-05T16:35:34.433+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129265]
2017-05-05T16:35:34.438+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129265, logTerm=3, entries=[1], commitIndex=129265, globalIndex=129246]
2017-05-05T16:35:34.438+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended KeepAliveEntry[index=129266, term=3, session=4, commandSequence=42361, eventIndex=4, timestamp=1493973334448] to log at index 129266
2017-05-05T16:35:34.438+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129266]
2017-05-05T16:35:34.452+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129266, logTerm=3, entries=[1], commitIndex=129266, globalIndex=129246]
2017-05-05T16:35:34.452+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Appended ConnectEntry[index=129267, term=3, client=4c066ee7-c122-43ff-ab8d-a91b4fb315f8, address=/10.126.91.199:8701, timestamp=1493973334462] to log at index 129267
2017-05-05T16:35:34.453+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129267]
2017-05-05T16:35:34.455+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129267, logTerm=3, entries=[0], commitIndex=129267, globalIndex=129246]
2017-05-05T16:35:34.455+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Sent AppendResponse[status=OK, term=3, succeeded=true, logIndex=129267]
2017-05-05T16:35:34.473+08:00 [copycat-server-/10.126.85.164:8701-copycat] DEBUG i.a.c.server.state.FollowerState - /10.126.85.164:8701 - Received AppendRequest[term=3, leader=176061669, logIndex=129267, logTerm=3, entries=[1], commitIndex=129267, globalIndex=129267]
```