<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_144) on Thu May 17 13:42:27 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PermanentBlobCache</title>
<meta name="date" content="2018-05-17">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PermanentBlobCache";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/flink/runtime/blob/FileSystemBlobStore.html" title="org.apache.flink.runtime.blob中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.PermanentBlobCleanupTask.html" title="org.apache.flink.runtime.blob中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/flink/runtime/blob/PermanentBlobCache.html" target="_top">框架</a></li>
<li><a href="PermanentBlobCache.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.flink.runtime.blob</div>
<h2 title="类 PermanentBlobCache" class="title">类 PermanentBlobCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html" title="org.apache.flink.runtime.blob中的类">org.apache.flink.runtime.blob.AbstractBlobCache</a></li>
<li>
<ul class="inheritance">
<li>org.apache.flink.runtime.blob.PermanentBlobCache</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd>java.io.Closeable, java.lang.AutoCloseable, <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobService.html" title="org.apache.flink.runtime.blob中的接口">PermanentBlobService</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">PermanentBlobCache</span>
extends <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html" title="org.apache.flink.runtime.blob中的类">AbstractBlobCache</a>
implements <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobService.html" title="org.apache.flink.runtime.blob中的接口">PermanentBlobService</a></pre>
<div class="block">Provides a cache for permanent BLOB files including a per-job ref-counting and a staged cleanup.

 <p>When requesting BLOBs via <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getFile-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.PermanentBlobKey-"><code>getFile(JobID, PermanentBlobKey)</code></a>, the cache will first
 attempt to serve the file from its local cache. Only if the local cache does not contain the
 desired BLOB, it will try to download it from a distributed HA file system (if available) or the
 BLOB server.

 <p>If files for a job are not needed any more, they will enter a staged, i.e. deferred, cleanup.
 Files may thus still be be accessible upon recovery and do not need to be re-downloaded.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">类和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(专用程序包) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.PermanentBlobCleanupTask.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobCache.PermanentBlobCleanupTask</a></span></code>
<div class="block">Cleanup task which is executed periodically to delete BLOBs whose ref-counter reached
 <tt>0</tt>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(专用程序包) static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.RefCount.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobCache.RefCount</a></span></code>
<div class="block">Job reference counters with a time-to-live (TTL).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="字段概要表, 列表字段和解释">
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">字段和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#cleanupInterval">cleanupInterval</a></span></code>
<div class="block">Time interval (ms) to run the cleanup task; also used as the default TTL.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Timer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#cleanupTimer">cleanupTimer</a></span></code>
<div class="block">Timer task to execute the cleanup at regular intervals.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Map&lt;<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>,<a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.RefCount.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobCache.RefCount</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#jobRefCounters">jobRefCounters</a></span></code>
<div class="block">Map to store the number of references to a specific job.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.flink.runtime.blob.AbstractBlobCache">
<!--   -->
</a>
<h3>从类继承的字段&nbsp;org.apache.flink.runtime.blob.<a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html" title="org.apache.flink.runtime.blob中的类">AbstractBlobCache</a></h3>
<code><a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#blobClientConfig">blobClientConfig</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#blobView">blobView</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#log">log</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#numFetchRetries">numFetchRetries</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#readWriteLock">readWriteLock</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#serverAddress">serverAddress</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#shutdownHook">shutdownHook</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#shutdownRequested">shutdownRequested</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#storageDir">storageDir</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#tempFileCounter">tempFileCounter</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#PermanentBlobCache-java.net.InetSocketAddress-org.apache.flink.configuration.Configuration-org.apache.flink.runtime.blob.BlobView-">PermanentBlobCache</a></span>(java.net.InetSocketAddress&nbsp;serverAddress,
                  <a href="../../../../../org/apache/flink/configuration/Configuration.html" title="org.apache.flink.configuration中的类">Configuration</a>&nbsp;blobClientConfig,
                  <a href="../../../../../org/apache/flink/runtime/blob/BlobView.html" title="org.apache.flink.runtime.blob中的接口">BlobView</a>&nbsp;blobView)</code>
<div class="block">Instantiates a new cache for permanent BLOBs which are also available in an HA store.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#cancelCleanupTask--">cancelCleanupTask</a></span>()</code>
<div class="block">Cancels any cleanup task that subclasses may be executing.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.io.File</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getFile-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.PermanentBlobKey-">getFile</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId,
       <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobKey.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobKey</a>&nbsp;key)</code>
<div class="block">Returns the path to a local copy of the file associated with the provided job ID and blob
 key.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>(专用程序包) java.util.Map&lt;<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>,<a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.RefCount.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobCache.RefCount</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getJobRefCounters--">getJobRefCounters</a></span>()</code>
<div class="block">Returns the job reference counters - for testing purposes only!</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getNumberOfCachedJobs--">getNumberOfCachedJobs</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getNumberOfReferenceHolders-org.apache.flink.api.common.JobID-">getNumberOfReferenceHolders</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.io.File</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getStorageLocation-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.BlobKey-">getStorageLocation</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId,
                  <a href="../../../../../org/apache/flink/runtime/blob/BlobKey.html" title="org.apache.flink.runtime.blob中的类">BlobKey</a>&nbsp;key)</code>
<div class="block">Returns a file handle to the file associated with the given blob key on the blob
 server.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#registerJob-org.apache.flink.api.common.JobID-">registerJob</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId)</code>
<div class="block">Registers use of job-related BLOBs.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#releaseJob-org.apache.flink.api.common.JobID-">releaseJob</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId)</code>
<div class="block">Unregisters use of job-related BLOBs and allow them to be released.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.flink.runtime.blob.AbstractBlobCache">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.apache.flink.runtime.blob.<a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html" title="org.apache.flink.runtime.blob中的类">AbstractBlobCache</a></h3>
<code><a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#close--">close</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#createTemporaryFilename--">createTemporaryFilename</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#getFileInternal-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.BlobKey-">getFileInternal</a>, <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#getPort--">getPort</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.Closeable">
<!--   -->
</a>
<h3>从接口继承的方法&nbsp;java.io.Closeable</h3>
<code>close</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a name="jobRefCounters">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jobRefCounters</h4>
<pre>private final&nbsp;java.util.Map&lt;<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>,<a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.RefCount.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobCache.RefCount</a>&gt; jobRefCounters</pre>
<div class="block">Map to store the number of references to a specific job.</div>
</li>
</ul>
<a name="cleanupInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanupInterval</h4>
<pre>private final&nbsp;long cleanupInterval</pre>
<div class="block">Time interval (ms) to run the cleanup task; also used as the default TTL.</div>
</li>
</ul>
<a name="cleanupTimer">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cleanupTimer</h4>
<pre>private final&nbsp;java.util.Timer cleanupTimer</pre>
<div class="block">Timer task to execute the cleanup at regular intervals.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="PermanentBlobCache-java.net.InetSocketAddress-org.apache.flink.configuration.Configuration-org.apache.flink.runtime.blob.BlobView-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PermanentBlobCache</h4>
<pre>public&nbsp;PermanentBlobCache(java.net.InetSocketAddress&nbsp;serverAddress,
                          <a href="../../../../../org/apache/flink/configuration/Configuration.html" title="org.apache.flink.configuration中的类">Configuration</a>&nbsp;blobClientConfig,
                          <a href="../../../../../org/apache/flink/runtime/blob/BlobView.html" title="org.apache.flink.runtime.blob中的接口">BlobView</a>&nbsp;blobView)
                   throws java.io.IOException</pre>
<div class="block">Instantiates a new cache for permanent BLOBs which are also available in an HA store.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>serverAddress</code> - address of the <a href="../../../../../org/apache/flink/runtime/blob/BlobServer.html" title="org.apache.flink.runtime.blob中的类"><code>BlobServer</code></a> to use for fetching files from</dd>
<dd><code>blobClientConfig</code> - global configuration</dd>
<dd><code>blobView</code> - (distributed) HA blob store file system to retrieve files from first</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - thrown if the (local or distributed) file storage cannot be created or is not usable</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="registerJob-org.apache.flink.api.common.JobID-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerJob</h4>
<pre>public&nbsp;void&nbsp;registerJob(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId)</pre>
<div class="block">Registers use of job-related BLOBs.

 <p>Using any other method to access BLOBs, e.g. <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#getFile-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.PermanentBlobKey-"><code>getFile(org.apache.flink.api.common.JobID, org.apache.flink.runtime.blob.PermanentBlobKey)</code></a>, is only valid within
 calls to <tt>registerJob(JobID)</tt> and <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#releaseJob-org.apache.flink.api.common.JobID-"><code>releaseJob(JobID)</code></a>.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>jobId</code> - ID of the job this blob belongs to</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#releaseJob-org.apache.flink.api.common.JobID-"><code>releaseJob(JobID)</code></a></dd>
</dl>
</li>
</ul>
<a name="releaseJob-org.apache.flink.api.common.JobID-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseJob</h4>
<pre>public&nbsp;void&nbsp;releaseJob(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId)</pre>
<div class="block">Unregisters use of job-related BLOBs and allow them to be released.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>jobId</code> - ID of the job this blob belongs to</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.html#registerJob-org.apache.flink.api.common.JobID-"><code>registerJob(JobID)</code></a></dd>
</dl>
</li>
</ul>
<a name="getNumberOfReferenceHolders-org.apache.flink.api.common.JobID-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfReferenceHolders</h4>
<pre>public&nbsp;int&nbsp;getNumberOfReferenceHolders(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId)</pre>
</li>
</ul>
<a name="getNumberOfCachedJobs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfCachedJobs</h4>
<pre>public&nbsp;int&nbsp;getNumberOfCachedJobs()</pre>
</li>
</ul>
<a name="getFile-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.PermanentBlobKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>public&nbsp;java.io.File&nbsp;getFile(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId,
                            <a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobKey.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobKey</a>&nbsp;key)
                     throws java.io.IOException</pre>
<div class="block">Returns the path to a local copy of the file associated with the provided job ID and blob
 key.

 <p>We will first attempt to serve the BLOB from the local storage. If the BLOB is not in
 there, we will try to download it from the HA store, or directly from the <a href="../../../../../org/apache/flink/runtime/blob/BlobServer.html" title="org.apache.flink.runtime.blob中的类"><code>BlobServer</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobService.html#getFile-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.PermanentBlobKey-">getFile</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobService.html" title="org.apache.flink.runtime.blob中的接口">PermanentBlobService</a></code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>jobId</code> - ID of the job this blob belongs to</dd>
<dd><code>key</code> - blob key associated with the requested file</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The path to the file.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.FileNotFoundException</code> - if the BLOB does not exist;</dd>
<dd><code>java.io.IOException</code> - if any other error occurs when retrieving the file</dd>
</dl>
</li>
</ul>
<a name="getStorageLocation-org.apache.flink.api.common.JobID-org.apache.flink.runtime.blob.BlobKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageLocation</h4>
<pre><a href="../../../../../org/apache/flink/annotation/VisibleForTesting.html" title="org.apache.flink.annotation中的注释">@VisibleForTesting</a>
public&nbsp;java.io.File&nbsp;getStorageLocation(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId,
                                                          <a href="../../../../../org/apache/flink/runtime/blob/BlobKey.html" title="org.apache.flink.runtime.blob中的类">BlobKey</a>&nbsp;key)
                                                   throws java.io.IOException</pre>
<div class="block">Returns a file handle to the file associated with the given blob key on the blob
 server.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>jobId</code> - ID of the job this blob belongs to (or <tt>null</tt> if job-unrelated)</dd>
<dd><code>key</code> - identifying the file</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>file handle to the file</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.io.IOException</code> - if creating the directory fails</dd>
</dl>
</li>
</ul>
<a name="getJobRefCounters--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJobRefCounters</h4>
<pre><a href="../../../../../org/apache/flink/annotation/VisibleForTesting.html" title="org.apache.flink.annotation中的注释">@VisibleForTesting</a>
java.util.Map&lt;<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>,<a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.RefCount.html" title="org.apache.flink.runtime.blob中的类">PermanentBlobCache.RefCount</a>&gt;&nbsp;getJobRefCounters()</pre>
<div class="block">Returns the job reference counters - for testing purposes only!</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>job reference counters (internal state!)</dd>
</dl>
</li>
</ul>
<a name="cancelCleanupTask--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cancelCleanupTask</h4>
<pre>protected&nbsp;void&nbsp;cancelCleanupTask()</pre>
<div class="block"><span class="descfrmTypeLabel">从类复制的说明:&nbsp;<code><a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#cancelCleanupTask--">AbstractBlobCache</a></code></span></div>
<div class="block">Cancels any cleanup task that subclasses may be executing.

 <p>This is called during <a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#close--"><code>AbstractBlobCache.close()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html#cancelCleanupTask--">cancelCleanupTask</a></code>&nbsp;在类中&nbsp;<code><a href="../../../../../org/apache/flink/runtime/blob/AbstractBlobCache.html" title="org.apache.flink.runtime.blob中的类">AbstractBlobCache</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/flink/runtime/blob/FileSystemBlobStore.html" title="org.apache.flink.runtime.blob中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/flink/runtime/blob/PermanentBlobCache.PermanentBlobCleanupTask.html" title="org.apache.flink.runtime.blob中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/flink/runtime/blob/PermanentBlobCache.html" target="_top">框架</a></li>
<li><a href="PermanentBlobCache.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
