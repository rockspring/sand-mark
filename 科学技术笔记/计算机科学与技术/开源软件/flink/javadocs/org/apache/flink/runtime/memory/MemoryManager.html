<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_144) on Thu May 17 13:42:28 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>MemoryManager</title>
<meta name="date" content="2018-05-17">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MemoryManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/flink/runtime/memory/MemoryAllocationException.html" title="org.apache.flink.runtime.memory中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.HybridHeapMemoryPool.html" title="org.apache.flink.runtime.memory中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/flink/runtime/memory/MemoryManager.html" target="_top">框架</a></li>
<li><a href="MemoryManager.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.flink.runtime.memory</div>
<h2 title="类 MemoryManager" class="title">类 MemoryManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.flink.runtime.memory.MemoryManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">MemoryManager</span>
extends java.lang.Object</pre>
<div class="block">The memory manager governs the memory that Flink uses for sorting, hashing, and caching. Memory
 is represented in segments of equal size. Operators allocate the memory by requesting a number
 of memory segments.

 <p>The memory may be represented as on-heap byte arrays or as off-heap memory regions
 (both via <a href="../../../../../org/apache/flink/core/memory/HybridMemorySegment.html" title="org.apache.flink.core.memory中的类"><code>HybridMemorySegment</code></a>). Which kind of memory the MemoryManager serves can
 be passed as an argument to the initialization.

 <p>The memory manager can either pre-allocate all memory, or allocate the memory on demand. In the
 former version, memory will be occupied and reserved from start on, which means that no OutOfMemoryError
 can come while requesting memory. Released memory will also return to the MemoryManager's pool.
 On-demand allocation means that the memory manager only keeps track how many memory segments are
 currently allocated (bookkeeping only). Releasing a memory segment will not add it back to the pool,
 but make it re-claimable by the garbage collector.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">类和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(专用程序包) static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.HybridHeapMemoryPool.html" title="org.apache.flink.runtime.memory中的类">MemoryManager.HybridHeapMemoryPool</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(专用程序包) static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.HybridOffHeapMemoryPool.html" title="org.apache.flink.runtime.memory中的类">MemoryManager.HybridOffHeapMemoryPool</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(专用程序包) static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.MemoryPool.html" title="org.apache.flink.runtime.memory中的类">MemoryManager.MemoryPool</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="字段概要表, 列表字段和解释">
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">字段和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.Object,java.util.Set&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#allocatedSegments">allocatedSegments</a></span></code>
<div class="block">Memory segments allocated per memory owner.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#DEFAULT_PAGE_SIZE">DEFAULT_PAGE_SIZE</a></span></code>
<div class="block">The default memory page size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#isPreAllocated">isPreAllocated</a></span></code>
<div class="block">Flag marking whether the memory manager immediately allocates the memory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#isShutDown">isShutDown</a></span></code>
<div class="block">Flag whether the close() has already been invoked.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#lock">lock</a></span></code>
<div class="block">The lock used on the shared structures.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static org.slf4j.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#LOG">LOG</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.MemoryPool.html" title="org.apache.flink.runtime.memory中的类">MemoryManager.MemoryPool</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#memoryPool">memoryPool</a></span></code>
<div class="block">The memory pool from which we draw memory segments.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#memorySize">memorySize</a></span></code>
<div class="block">The total size of the memory managed by this memory manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/core/memory/MemoryType.html" title="org.apache.flink.core.memory中的枚举">MemoryType</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#memoryType">memoryType</a></span></code>
<div class="block">The type of memory governed by this memory manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#MIN_PAGE_SIZE">MIN_PAGE_SIZE</a></span></code>
<div class="block">The minimal memory page size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#numberOfSlots">numberOfSlots</a></span></code>
<div class="block">Number of slots of the task manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#numNonAllocatedPages">numNonAllocatedPages</a></span></code>
<div class="block">The number of memory pages that have not been allocated and are available for lazy allocation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#pageSize">pageSize</a></span></code>
<div class="block">The size of the memory segments.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#roundingMask">roundingMask</a></span></code>
<div class="block">Mask used to round down sizes to multiples of the page size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#totalNumPages">totalNumPages</a></span></code>
<div class="block">The initial total size, for verification.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#MemoryManager-long-int-">MemoryManager</a></span>(long&nbsp;memorySize,
             int&nbsp;numberOfSlots)</code>
<div class="block">Creates a memory manager with the given capacity, using the default page size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#MemoryManager-long-int-int-org.apache.flink.core.memory.MemoryType-boolean-">MemoryManager</a></span>(long&nbsp;memorySize,
             int&nbsp;numberOfSlots,
             int&nbsp;pageSize,
             <a href="../../../../../org/apache/flink/core/memory/MemoryType.html" title="org.apache.flink.core.memory中的枚举">MemoryType</a>&nbsp;memoryType,
             boolean&nbsp;preAllocateMemory)</code>
<div class="block">Creates a memory manager with the given capacity and given page size.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#allocatePages-java.lang.Object-int-">allocatePages</a></span>(java.lang.Object&nbsp;owner,
             int&nbsp;numPages)</code>
<div class="block">Allocates a set of memory segments from this memory manager.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#allocatePages-java.lang.Object-java.util.List-int-">allocatePages</a></span>(java.lang.Object&nbsp;owner,
             java.util.List&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&nbsp;target,
             int&nbsp;numPages)</code>
<div class="block">Allocates a set of memory segments from this memory manager.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#computeMemorySize-double-">computeMemorySize</a></span>(double&nbsp;fraction)</code>
<div class="block">Computes the memory size of the fraction per slot.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#computeNumberOfPages-double-">computeNumberOfPages</a></span>(double&nbsp;fraction)</code>
<div class="block">Computes to how many pages the given number of bytes corresponds.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#getMemorySize--">getMemorySize</a></span>()</code>
<div class="block">Returns the total size of memory handled by this memory manager.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/flink/core/memory/MemoryType.html" title="org.apache.flink.core.memory中的枚举">MemoryType</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#getMemoryType--">getMemoryType</a></span>()</code>
<div class="block">Gets the type of memory (heap / off-heap) managed by this memory manager.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#getPageSize--">getPageSize</a></span>()</code>
<div class="block">Gets the size of the pages handled by the memory manager.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#getTotalNumPages--">getTotalNumPages</a></span>()</code>
<div class="block">Gets the total number of memory pages managed by this memory manager.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#isPreAllocated--">isPreAllocated</a></span>()</code>
<div class="block">Checks whether this memory manager pre-allocates the memory.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#isShutdown--">isShutdown</a></span>()</code>
<div class="block">Checks whether the MemoryManager has been shut down.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#release-java.util.Collection-">release</a></span>(java.util.Collection&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&nbsp;segments)</code>
<div class="block">Tries to release many memory segments together.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#release-org.apache.flink.core.memory.MemorySegment-">release</a></span>(<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&nbsp;segment)</code>
<div class="block">Tries to release the memory for the specified segment.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#releaseAll-java.lang.Object-">releaseAll</a></span>(java.lang.Object&nbsp;owner)</code>
<div class="block">Releases all memory segments for the given owner.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#roundDownToPageSizeMultiple-long-">roundDownToPageSizeMultiple</a></span>(long&nbsp;numBytes)</code>
<div class="block">Rounds the given value down to a multiple of the memory manager's page size.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Shuts the memory manager down, trying to release all the memory it managed.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.html#verifyEmpty--">verifyEmpty</a></span>()</code>
<div class="block">Checks if the memory manager all memory available.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;org.slf4j.Logger LOG</pre>
</li>
</ul>
<a name="DEFAULT_PAGE_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_PAGE_SIZE</h4>
<pre>public static final&nbsp;int DEFAULT_PAGE_SIZE</pre>
<div class="block">The default memory page size. Currently set to 32 KiBytes.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.flink.runtime.memory.MemoryManager.DEFAULT_PAGE_SIZE">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="MIN_PAGE_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_PAGE_SIZE</h4>
<pre>public static final&nbsp;int MIN_PAGE_SIZE</pre>
<div class="block">The minimal memory page size. Currently set to 4 KiBytes.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.flink.runtime.memory.MemoryManager.MIN_PAGE_SIZE">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>private final&nbsp;java.lang.Object lock</pre>
<div class="block">The lock used on the shared structures.</div>
</li>
</ul>
<a name="memoryPool">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>memoryPool</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.MemoryPool.html" title="org.apache.flink.runtime.memory中的类">MemoryManager.MemoryPool</a> memoryPool</pre>
<div class="block">The memory pool from which we draw memory segments. Specific to on-heap or off-heap memory</div>
</li>
</ul>
<a name="allocatedSegments">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocatedSegments</h4>
<pre>private final&nbsp;java.util.HashMap&lt;java.lang.Object,java.util.Set&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&gt; allocatedSegments</pre>
<div class="block">Memory segments allocated per memory owner.</div>
</li>
</ul>
<a name="memoryType">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>memoryType</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/core/memory/MemoryType.html" title="org.apache.flink.core.memory中的枚举">MemoryType</a> memoryType</pre>
<div class="block">The type of memory governed by this memory manager.</div>
</li>
</ul>
<a name="roundingMask">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>roundingMask</h4>
<pre>private final&nbsp;long roundingMask</pre>
<div class="block">Mask used to round down sizes to multiples of the page size.</div>
</li>
</ul>
<a name="pageSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pageSize</h4>
<pre>private final&nbsp;int pageSize</pre>
<div class="block">The size of the memory segments.</div>
</li>
</ul>
<a name="totalNumPages">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>totalNumPages</h4>
<pre>private final&nbsp;int totalNumPages</pre>
<div class="block">The initial total size, for verification.</div>
</li>
</ul>
<a name="memorySize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>memorySize</h4>
<pre>private final&nbsp;long memorySize</pre>
<div class="block">The total size of the memory managed by this memory manager.</div>
</li>
</ul>
<a name="numberOfSlots">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numberOfSlots</h4>
<pre>private final&nbsp;int numberOfSlots</pre>
<div class="block">Number of slots of the task manager.</div>
</li>
</ul>
<a name="isPreAllocated">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isPreAllocated</h4>
<pre>private final&nbsp;boolean isPreAllocated</pre>
<div class="block">Flag marking whether the memory manager immediately allocates the memory.</div>
</li>
</ul>
<a name="numNonAllocatedPages">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numNonAllocatedPages</h4>
<pre>private&nbsp;int numNonAllocatedPages</pre>
<div class="block">The number of memory pages that have not been allocated and are available for lazy allocation.</div>
</li>
</ul>
<a name="isShutDown">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isShutDown</h4>
<pre>private&nbsp;boolean isShutDown</pre>
<div class="block">Flag whether the close() has already been invoked.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="MemoryManager-long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MemoryManager</h4>
<pre>public&nbsp;MemoryManager(long&nbsp;memorySize,
                     int&nbsp;numberOfSlots)</pre>
<div class="block">Creates a memory manager with the given capacity, using the default page size.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>memorySize</code> - The total size of the memory to be managed by this memory manager.</dd>
<dd><code>numberOfSlots</code> - The number of slots of the task manager.</dd>
</dl>
</li>
</ul>
<a name="MemoryManager-long-int-int-org.apache.flink.core.memory.MemoryType-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MemoryManager</h4>
<pre>public&nbsp;MemoryManager(long&nbsp;memorySize,
                     int&nbsp;numberOfSlots,
                     int&nbsp;pageSize,
                     <a href="../../../../../org/apache/flink/core/memory/MemoryType.html" title="org.apache.flink.core.memory中的枚举">MemoryType</a>&nbsp;memoryType,
                     boolean&nbsp;preAllocateMemory)</pre>
<div class="block">Creates a memory manager with the given capacity and given page size.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>memorySize</code> - The total size of the memory to be managed by this memory manager.</dd>
<dd><code>numberOfSlots</code> - The number of slots of the task manager.</dd>
<dd><code>pageSize</code> - The size of the pages handed out by the memory manager.</dd>
<dd><code>memoryType</code> - The type of memory (heap / off-heap) that the memory manager should allocate.</dd>
<dd><code>preAllocateMemory</code> - True, if the memory manager should immediately allocate all memory, false
                          if it should allocate and release the memory as needed.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Shuts the memory manager down, trying to release all the memory it managed. Depending
 on implementation details, the memory does not necessarily become reclaimable by the
 garbage collector, because there might still be references to allocated segments in the
 code that allocated them from the memory manager.</div>
</li>
</ul>
<a name="isShutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShutdown</h4>
<pre>public&nbsp;boolean&nbsp;isShutdown()</pre>
<div class="block">Checks whether the MemoryManager has been shut down.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>True, if the memory manager is shut down, false otherwise.</dd>
</dl>
</li>
</ul>
<a name="verifyEmpty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyEmpty</h4>
<pre>public&nbsp;boolean&nbsp;verifyEmpty()</pre>
<div class="block">Checks if the memory manager all memory available.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>True, if the memory manager is empty and valid, false if it is not empty or corrupted.</dd>
</dl>
</li>
</ul>
<a name="allocatePages-java.lang.Object-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocatePages</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&nbsp;allocatePages(java.lang.Object&nbsp;owner,
                                                   int&nbsp;numPages)
                                            throws <a href="../../../../../org/apache/flink/runtime/memory/MemoryAllocationException.html" title="org.apache.flink.runtime.memory中的类">MemoryAllocationException</a></pre>
<div class="block">Allocates a set of memory segments from this memory manager. If the memory manager pre-allocated the
 segments, they will be taken from the pool of memory segments. Otherwise, they will be allocated
 as part of this call.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>owner</code> - The owner to associate with the memory segment, for the fallback release.</dd>
<dd><code>numPages</code> - The number of pages to allocate.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>A list with the memory segments.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="../../../../../org/apache/flink/runtime/memory/MemoryAllocationException.html" title="org.apache.flink.runtime.memory中的类">MemoryAllocationException</a></code> - Thrown, if this memory manager does not have the requested amount
                                   of memory pages any more.</dd>
</dl>
</li>
</ul>
<a name="allocatePages-java.lang.Object-java.util.List-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocatePages</h4>
<pre>public&nbsp;void&nbsp;allocatePages(java.lang.Object&nbsp;owner,
                          java.util.List&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&nbsp;target,
                          int&nbsp;numPages)
                   throws <a href="../../../../../org/apache/flink/runtime/memory/MemoryAllocationException.html" title="org.apache.flink.runtime.memory中的类">MemoryAllocationException</a></pre>
<div class="block">Allocates a set of memory segments from this memory manager. If the memory manager pre-allocated the
 segments, they will be taken from the pool of memory segments. Otherwise, they will be allocated
 as part of this call.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>owner</code> - The owner to associate with the memory segment, for the fallback release.</dd>
<dd><code>target</code> - The list into which to put the allocated memory pages.</dd>
<dd><code>numPages</code> - The number of pages to allocate.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="../../../../../org/apache/flink/runtime/memory/MemoryAllocationException.html" title="org.apache.flink.runtime.memory中的类">MemoryAllocationException</a></code> - Thrown, if this memory manager does not have the requested amount
                                   of memory pages any more.</dd>
</dl>
</li>
</ul>
<a name="release-org.apache.flink.core.memory.MemorySegment-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>release</h4>
<pre>public&nbsp;void&nbsp;release(<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&nbsp;segment)</pre>
<div class="block">Tries to release the memory for the specified segment. If the segment has already been released or
 is null, the request is simply ignored.

 <p>If the memory manager manages pre-allocated memory, the memory segment goes back to the memory pool.
 Otherwise, the segment is only freed and made eligible for reclamation by the GC.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>segment</code> - The segment to be released.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - Thrown, if the given segment is of an incompatible type.</dd>
</dl>
</li>
</ul>
<a name="release-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>release</h4>
<pre>public&nbsp;void&nbsp;release(java.util.Collection&lt;<a href="../../../../../org/apache/flink/core/memory/MemorySegment.html" title="org.apache.flink.core.memory中的类">MemorySegment</a>&gt;&nbsp;segments)</pre>
<div class="block">Tries to release many memory segments together.

 <p>If the memory manager manages pre-allocated memory, the memory segment goes back to the memory pool.
 Otherwise, the segment is only freed and made eligible for reclamation by the GC.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>segments</code> - The segments to be released.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.NullPointerException</code> - Thrown, if the given collection is null.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - Thrown, id the segments are of an incompatible type.</dd>
</dl>
</li>
</ul>
<a name="releaseAll-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseAll</h4>
<pre>public&nbsp;void&nbsp;releaseAll(java.lang.Object&nbsp;owner)</pre>
<div class="block">Releases all memory segments for the given owner.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>owner</code> - The owner memory segments are to be released.</dd>
</dl>
</li>
</ul>
<a name="getMemoryType--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMemoryType</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/flink/core/memory/MemoryType.html" title="org.apache.flink.core.memory中的枚举">MemoryType</a>&nbsp;getMemoryType()</pre>
<div class="block">Gets the type of memory (heap / off-heap) managed by this memory manager.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The type of memory managed by this memory manager.</dd>
</dl>
</li>
</ul>
<a name="isPreAllocated--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isPreAllocated</h4>
<pre>public&nbsp;boolean&nbsp;isPreAllocated()</pre>
<div class="block">Checks whether this memory manager pre-allocates the memory.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>True if the memory manager pre-allocates the memory, false if it allocates as needed.</dd>
</dl>
</li>
</ul>
<a name="getPageSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageSize</h4>
<pre>public&nbsp;int&nbsp;getPageSize()</pre>
<div class="block">Gets the size of the pages handled by the memory manager.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The size of the pages handled by the memory manager.</dd>
</dl>
</li>
</ul>
<a name="getMemorySize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMemorySize</h4>
<pre>public&nbsp;long&nbsp;getMemorySize()</pre>
<div class="block">Returns the total size of memory handled by this memory manager.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The total size of memory.</dd>
</dl>
</li>
</ul>
<a name="getTotalNumPages--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalNumPages</h4>
<pre>public&nbsp;int&nbsp;getTotalNumPages()</pre>
<div class="block">Gets the total number of memory pages managed by this memory manager.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The total number of memory pages managed by this memory manager.</dd>
</dl>
</li>
</ul>
<a name="computeNumberOfPages-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeNumberOfPages</h4>
<pre>public&nbsp;int&nbsp;computeNumberOfPages(double&nbsp;fraction)</pre>
<div class="block">Computes to how many pages the given number of bytes corresponds. If the given number of bytes is not an
 exact multiple of a page size, the result is rounded down, such that a portion of the memory (smaller
 than the page size) is not included.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>fraction</code> - the fraction of the total memory per slot</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The number of pages to which</dd>
</dl>
</li>
</ul>
<a name="computeMemorySize-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeMemorySize</h4>
<pre>public&nbsp;long&nbsp;computeMemorySize(double&nbsp;fraction)</pre>
<div class="block">Computes the memory size of the fraction per slot.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>fraction</code> - The fraction of the memory of the task slot.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The number of pages corresponding to the memory fraction.</dd>
</dl>
</li>
</ul>
<a name="roundDownToPageSizeMultiple-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>roundDownToPageSizeMultiple</h4>
<pre>public&nbsp;long&nbsp;roundDownToPageSizeMultiple(long&nbsp;numBytes)</pre>
<div class="block">Rounds the given value down to a multiple of the memory manager's page size.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The given value, rounded down to a multiple of the page size.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/flink/runtime/memory/MemoryAllocationException.html" title="org.apache.flink.runtime.memory中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/flink/runtime/memory/MemoryManager.HybridHeapMemoryPool.html" title="org.apache.flink.runtime.memory中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/flink/runtime/memory/MemoryManager.html" target="_top">框架</a></li>
<li><a href="MemoryManager.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
