<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_144) on Thu May 17 13:42:27 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CheckpointCoordinator</title>
<meta name="date" content="2018-05-17">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CheckpointCoordinator";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/flink/runtime/checkpoint/AbstractCheckpointStats.html" title="org.apache.flink.runtime.checkpoint中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.ScheduledTrigger.html" title="org.apache.flink.runtime.checkpoint中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html" target="_top">框架</a></li>
<li><a href="CheckpointCoordinator.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.flink.runtime.checkpoint</div>
<h2 title="类 CheckpointCoordinator" class="title">类 CheckpointCoordinator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.flink.runtime.checkpoint.CheckpointCoordinator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">CheckpointCoordinator</span>
extends java.lang.Object</pre>
<div class="block">The checkpoint coordinator coordinates the distributed snapshots of operators and state.
 It triggers the checkpoint by sending the messages to the relevant tasks and collects the
 checkpoint acknowledgements. It also collects and maintains the overview of the state handles
 reported by the tasks that acknowledge the checkpoint.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">类和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.ScheduledTrigger.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointCoordinator.ScheduledTrigger</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="字段概要表, 列表字段和解释">
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">字段和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#baseInterval">baseInterval</a></span></code>
<div class="block">The base checkpoint interval.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#checkpointDirectory">checkpointDirectory</a></span></code>
<div class="block">Default directory for persistent checkpoints; <code>null</code> if none configured.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointIDCounter.html" title="org.apache.flink.runtime.checkpoint中的接口">CheckpointIDCounter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#checkpointIdCounter">checkpointIdCounter</a></span></code>
<div class="block">Checkpoint ID counter to ensure ascending IDs.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointProperties.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointProperties</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#checkpointProperties">checkpointProperties</a></span></code>
<div class="block">Default checkpoint properties</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#checkpointTimeout">checkpointTimeout</a></span></code>
<div class="block">The max time (in ms) that a checkpoint may take</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpointStore.html" title="org.apache.flink.runtime.checkpoint中的接口">CompletedCheckpointStore</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#completedCheckpointStore">completedCheckpointStore</a></span></code>
<div class="block">Completed checkpoints.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.concurrent.ScheduledFuture&lt;?&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#currentPeriodicTrigger">currentPeriodicTrigger</a></span></code>
<div class="block">A handle to the current periodic trigger, to cancel it when necessary</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.concurrent.Executor</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#executor">executor</a></span></code>
<div class="block">The executor used for asynchronous calls, like potentially blocking I/O</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#job">job</a></span></code>
<div class="block">The job whose checkpoint this coordinator coordinates</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/executiongraph/JobStatusListener.html" title="org.apache.flink.runtime.executiongraph中的接口">JobStatusListener</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#jobStatusListener">jobStatusListener</a></span></code>
<div class="block">Actor that receives status updates from the execution graph this coordinator works for</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#lastCheckpointCompletionNanos">lastCheckpointCompletionNanos</a></span></code>
<div class="block">The timestamp (via <code>System.nanoTime()</code>) when the last checkpoint completed</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#lock">lock</a></span></code>
<div class="block">Coordinator-wide lock to safeguard the checkpoint updates</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.slf4j.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#LOG">LOG</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.String,<a href="../../../../../org/apache/flink/runtime/checkpoint/MasterTriggerRestoreHook.html" title="org.apache.flink.runtime.checkpoint中的接口">MasterTriggerRestoreHook</a>&lt;?&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#masterHooks">masterHooks</a></span></code>
<div class="block">The master checkpoint hooks executed by this checkpoint coordinator</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#maxConcurrentCheckpointAttempts">maxConcurrentCheckpointAttempts</a></span></code>
<div class="block">The maximum number of checkpoints that may be in progress at the same time</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#minPauseBetweenCheckpointsNanos">minPauseBetweenCheckpointsNanos</a></span></code>
<div class="block">The min time(in ms) to delay after a checkpoint could be triggered.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#NUM_GHOST_CHECKPOINT_IDS">NUM_GHOST_CHECKPOINT_IDS</a></span></code>
<div class="block">The number of recent checkpoints whose IDs are remembered</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.concurrent.atomic.AtomicInteger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#numUnsuccessfulCheckpointsTriggers">numUnsuccessfulCheckpointsTriggers</a></span></code>
<div class="block">The number of consecutive failed trigger attempts</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Map&lt;java.lang.Long,<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#pendingCheckpoints">pendingCheckpoints</a></span></code>
<div class="block">Map from checkpoint ID to the pending checkpoint</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#periodicScheduling">periodicScheduling</a></span></code>
<div class="block">Flag whether a triggered checkpoint should immediately schedule the next checkpoint.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayDeque&lt;java.lang.Long&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#recentPendingCheckpoints">recentPendingCheckpoints</a></span></code>
<div class="block">A list of recent checkpoint IDs, to identify late messages (vs invalid ones)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/state/SharedStateRegistry.html" title="org.apache.flink.runtime.state中的类">SharedStateRegistry</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#sharedStateRegistry">sharedStateRegistry</a></span></code>
<div class="block">Registry that tracks state which is shared across (incremental) checkpoints</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/state/SharedStateRegistryFactory.html" title="org.apache.flink.runtime.state中的接口">SharedStateRegistryFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#sharedStateRegistryFactory">sharedStateRegistryFactory</a></span></code>
<div class="block">A factory for SharedStateRegistry objects</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#shutdown">shutdown</a></span></code>
<div class="block">Flag marking the coordinator as shut down (not accepting any messages any more)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointStatsTracker.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointStatsTracker</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#statsTracker">statsTracker</a></span></code>
<div class="block">Optional tracker for checkpoint statistics.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#tasksToCommitTo">tasksToCommitTo</a></span></code>
<div class="block">Tasks who need to be sent a message when a checkpoint is confirmed</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#tasksToTrigger">tasksToTrigger</a></span></code>
<div class="block">Tasks who need to be sent a message when a checkpoint is started</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#tasksToWaitFor">tasksToWaitFor</a></span></code>
<div class="block">Tasks who need to acknowledge a checkpoint before it succeeds</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.concurrent.ScheduledThreadPoolExecutor</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#timer">timer</a></span></code>
<div class="block">The timer that handles the checkpoint timeouts and triggers periodic checkpoints</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerLock">triggerLock</a></span></code>
<div class="block">Lock specially to make sure that trigger requests do not overtake each other.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerRequestQueued">triggerRequestQueued</a></span></code>
<div class="block">Flag whether a trigger request could not be handled immediately.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#CheckpointCoordinator-org.apache.flink.api.common.JobID-long-long-long-int-org.apache.flink.runtime.jobgraph.tasks.ExternalizedCheckpointSettings-org.apache.flink.runtime.executiongraph.ExecutionVertex:A-org.apache.flink.runtime.executiongraph.ExecutionVertex:A-org.apache.flink.runtime.executiongraph.ExecutionVertex:A-org.apache.flink.runtime.checkpoint.CheckpointIDCounter-org.apache.flink.runtime.checkpoint.CompletedCheckpointStore-java.lang.String-java.util.concurrent.Executor-org.apache.flink.runtime.state.SharedStateRegistryFactory-">CheckpointCoordinator</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;job,
                     long&nbsp;baseInterval,
                     long&nbsp;checkpointTimeout,
                     long&nbsp;minPauseBetweenCheckpoints,
                     int&nbsp;maxConcurrentCheckpointAttempts,
                     <a href="../../../../../org/apache/flink/runtime/jobgraph/tasks/ExternalizedCheckpointSettings.html" title="org.apache.flink.runtime.jobgraph.tasks中的类">ExternalizedCheckpointSettings</a>&nbsp;externalizeSettings,
                     <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]&nbsp;tasksToTrigger,
                     <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]&nbsp;tasksToWaitFor,
                     <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]&nbsp;tasksToCommitTo,
                     <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointIDCounter.html" title="org.apache.flink.runtime.checkpoint中的接口">CheckpointIDCounter</a>&nbsp;checkpointIDCounter,
                     <a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpointStore.html" title="org.apache.flink.runtime.checkpoint中的接口">CompletedCheckpointStore</a>&nbsp;completedCheckpointStore,
                     java.lang.String&nbsp;checkpointDirectory,
                     java.util.concurrent.Executor&nbsp;executor,
                     <a href="../../../../../org/apache/flink/runtime/state/SharedStateRegistryFactory.html" title="org.apache.flink.runtime.state中的接口">SharedStateRegistryFactory</a>&nbsp;sharedStateRegistryFactory)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#addMasterHook-org.apache.flink.runtime.checkpoint.MasterTriggerRestoreHook-">addMasterHook</a></span>(<a href="../../../../../org/apache/flink/runtime/checkpoint/MasterTriggerRestoreHook.html" title="org.apache.flink.runtime.checkpoint中的接口">MasterTriggerRestoreHook</a>&lt;?&gt;&nbsp;hook)</code>
<div class="block">Adds the given master hook to the checkpoint coordinator.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#completePendingCheckpoint-org.apache.flink.runtime.checkpoint.PendingCheckpoint-">completePendingCheckpoint</a></span>(<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&nbsp;pendingCheckpoint)</code>
<div class="block">Try to complete the given pending checkpoint.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/flink/runtime/executiongraph/JobStatusListener.html" title="org.apache.flink.runtime.executiongraph中的接口">JobStatusListener</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#createActivatorDeactivator--">createActivatorDeactivator</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#discardCheckpoint-org.apache.flink.runtime.checkpoint.PendingCheckpoint-java.lang.Throwable-">discardCheckpoint</a></span>(<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&nbsp;pendingCheckpoint,
                 java.lang.Throwable&nbsp;cause)</code>
<div class="block">Discards the given pending checkpoint because of the given cause.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#discardSubtaskState-org.apache.flink.api.common.JobID-org.apache.flink.runtime.executiongraph.ExecutionAttemptID-long-org.apache.flink.runtime.checkpoint.TaskStateSnapshot-">discardSubtaskState</a></span>(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId,
                   <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionAttemptID.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionAttemptID</a>&nbsp;executionAttemptID,
                   long&nbsp;checkpointId,
                   <a href="../../../../../org/apache/flink/runtime/checkpoint/TaskStateSnapshot.html" title="org.apache.flink.runtime.checkpoint中的类">TaskStateSnapshot</a>&nbsp;subtaskState)</code>
<div class="block">Discards the given state object asynchronously belonging to the given job, execution attempt
 id and checkpoint id.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#dropSubsumedCheckpoints-long-">dropSubsumedCheckpoints</a></span>(long&nbsp;checkpointId)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#failUnacknowledgedPendingCheckpointsFor-org.apache.flink.runtime.executiongraph.ExecutionAttemptID-java.lang.Throwable-">failUnacknowledgedPendingCheckpointsFor</a></span>(<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionAttemptID.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionAttemptID</a>&nbsp;executionAttemptId,
                                       java.lang.Throwable&nbsp;cause)</code>
<div class="block">Fails all pending checkpoints which have not been acknowledged by the given execution
 attempt id.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointIDCounter.html" title="org.apache.flink.runtime.checkpoint中的接口">CheckpointIDCounter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getCheckpointIdCounter--">getCheckpointIdCounter</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpointStore.html" title="org.apache.flink.runtime.checkpoint中的接口">CompletedCheckpointStore</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getCheckpointStore--">getCheckpointStore</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getCheckpointTimeout--">getCheckpointTimeout</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getNumberOfPendingCheckpoints--">getNumberOfPendingCheckpoints</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getNumberOfRegisteredMasterHooks--">getNumberOfRegisteredMasterHooks</a></span>()</code>
<div class="block">Gets the number of currently register master hooks.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getNumberOfRetainedSuccessfulCheckpoints--">getNumberOfRetainedSuccessfulCheckpoints</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(专用程序包) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getNumScheduledTasks--">getNumScheduledTasks</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.Long,<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getPendingCheckpoints--">getPendingCheckpoints</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">CompletedCheckpoint</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#getSuccessfulCheckpoints--">getSuccessfulCheckpoints</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#isPeriodicCheckpointingConfigured--">isPeriodicCheckpointingConfigured</a></span>()</code>
<div class="block">Returns whether periodic checkpointing has been configured.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#isShutdown--">isShutdown</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#receiveAcknowledgeMessage-org.apache.flink.runtime.messages.checkpoint.AcknowledgeCheckpoint-">receiveAcknowledgeMessage</a></span>(<a href="../../../../../org/apache/flink/runtime/messages/checkpoint/AcknowledgeCheckpoint.html" title="org.apache.flink.runtime.messages.checkpoint中的类">AcknowledgeCheckpoint</a>&nbsp;message)</code>
<div class="block">Receives an AcknowledgeCheckpoint message and returns whether the
 message was associated with a pending checkpoint.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#receiveDeclineMessage-org.apache.flink.runtime.messages.checkpoint.DeclineCheckpoint-">receiveDeclineMessage</a></span>(<a href="../../../../../org/apache/flink/runtime/messages/checkpoint/DeclineCheckpoint.html" title="org.apache.flink.runtime.messages.checkpoint中的类">DeclineCheckpoint</a>&nbsp;message)</code>
<div class="block">Receives a <a href="../../../../../org/apache/flink/runtime/messages/checkpoint/DeclineCheckpoint.html" title="org.apache.flink.runtime.messages.checkpoint中的类"><code>DeclineCheckpoint</code></a> message for a pending checkpoint.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#rememberRecentCheckpointId-long-">rememberRecentCheckpointId</a></span>(long&nbsp;id)</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#restoreLatestCheckpointedState-java.util.Map-boolean-boolean-">restoreLatestCheckpointedState</a></span>(java.util.Map&lt;<a href="../../../../../org/apache/flink/runtime/jobgraph/JobVertexID.html" title="org.apache.flink.runtime.jobgraph中的类">JobVertexID</a>,<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionJobVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionJobVertex</a>&gt;&nbsp;tasks,
                              boolean&nbsp;errorIfNoCheckpoint,
                              boolean&nbsp;allowNonRestoredState)</code>
<div class="block">Restores the latest checkpointed state.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#restoreSavepoint-java.lang.String-boolean-java.util.Map-java.lang.ClassLoader-">restoreSavepoint</a></span>(java.lang.String&nbsp;savepointPath,
                boolean&nbsp;allowNonRestored,
                java.util.Map&lt;<a href="../../../../../org/apache/flink/runtime/jobgraph/JobVertexID.html" title="org.apache.flink.runtime.jobgraph中的类">JobVertexID</a>,<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionJobVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionJobVertex</a>&gt;&nbsp;tasks,
                java.lang.ClassLoader&nbsp;userClassLoader)</code>
<div class="block">Restore the state with given savepoint</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#setCheckpointStatsTracker-org.apache.flink.runtime.checkpoint.CheckpointStatsTracker-">setCheckpointStatsTracker</a></span>(<a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointStatsTracker.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointStatsTracker</a>&nbsp;statsTracker)</code>
<div class="block">Sets the checkpoint stats tracker.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#shutdown-org.apache.flink.runtime.jobgraph.JobStatus-">shutdown</a></span>(<a href="../../../../../org/apache/flink/runtime/jobgraph/JobStatus.html" title="org.apache.flink.runtime.jobgraph中的枚举">JobStatus</a>&nbsp;jobStatus)</code>
<div class="block">Shuts down the checkpoint coordinator.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#startCheckpointScheduler--">startCheckpointScheduler</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#stopCheckpointScheduler--">stopCheckpointScheduler</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerCheckpoint-long-boolean-">triggerCheckpoint</a></span>(long&nbsp;timestamp,
                 boolean&nbsp;isPeriodic)</code>
<div class="block">Triggers a new standard checkpoint and uses the given timestamp as the checkpoint
 timestamp.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">CompletedCheckpoint</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerCheckpoint-long-org.apache.flink.runtime.checkpoint.CheckpointOptions-">triggerCheckpoint</a></span>(long&nbsp;timestamp,
                 <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointOptions.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointOptions</a>&nbsp;options)</code>
<div class="block">Test method to trigger a checkpoint/savepoint.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>(专用程序包) <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointTriggerResult.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointTriggerResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerCheckpoint-long-org.apache.flink.runtime.checkpoint.CheckpointProperties-java.lang.String-boolean-">triggerCheckpoint</a></span>(long&nbsp;timestamp,
                 <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointProperties.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointProperties</a>&nbsp;props,
                 java.lang.String&nbsp;targetDirectory,
                 boolean&nbsp;isPeriodic)</code>&nbsp;</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerQueuedRequests--">triggerQueuedRequests</a></span>()</code>
<div class="block">Triggers the queued request, if there is one.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">CompletedCheckpoint</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html#triggerSavepoint-long-java.lang.String-">triggerSavepoint</a></span>(long&nbsp;timestamp,
                java.lang.String&nbsp;targetDirectory)</code>
<div class="block">Triggers a savepoint with the given savepoint directory as a target.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;org.slf4j.Logger LOG</pre>
</li>
</ul>
<a name="NUM_GHOST_CHECKPOINT_IDS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NUM_GHOST_CHECKPOINT_IDS</h4>
<pre>private static final&nbsp;int NUM_GHOST_CHECKPOINT_IDS</pre>
<div class="block">The number of recent checkpoints whose IDs are remembered</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.flink.runtime.checkpoint.CheckpointCoordinator.NUM_GHOST_CHECKPOINT_IDS">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>private final&nbsp;java.lang.Object lock</pre>
<div class="block">Coordinator-wide lock to safeguard the checkpoint updates</div>
</li>
</ul>
<a name="triggerLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerLock</h4>
<pre>private final&nbsp;java.lang.Object triggerLock</pre>
<div class="block">Lock specially to make sure that trigger requests do not overtake each other.
 This is not done with the coordinator-wide lock, because as part of triggering,
 blocking operations may happen (distributed atomic counters).
 Using a dedicated lock, we avoid blocking the processing of 'acknowledge/decline'
 messages during that phase.</div>
</li>
</ul>
<a name="job">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>job</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a> job</pre>
<div class="block">The job whose checkpoint this coordinator coordinates</div>
</li>
</ul>
<a name="checkpointProperties">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointProperties</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointProperties.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointProperties</a> checkpointProperties</pre>
<div class="block">Default checkpoint properties</div>
</li>
</ul>
<a name="executor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executor</h4>
<pre>private final&nbsp;java.util.concurrent.Executor executor</pre>
<div class="block">The executor used for asynchronous calls, like potentially blocking I/O</div>
</li>
</ul>
<a name="tasksToTrigger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tasksToTrigger</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[] tasksToTrigger</pre>
<div class="block">Tasks who need to be sent a message when a checkpoint is started</div>
</li>
</ul>
<a name="tasksToWaitFor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tasksToWaitFor</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[] tasksToWaitFor</pre>
<div class="block">Tasks who need to acknowledge a checkpoint before it succeeds</div>
</li>
</ul>
<a name="tasksToCommitTo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tasksToCommitTo</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[] tasksToCommitTo</pre>
<div class="block">Tasks who need to be sent a message when a checkpoint is confirmed</div>
</li>
</ul>
<a name="pendingCheckpoints">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingCheckpoints</h4>
<pre>private final&nbsp;java.util.Map&lt;java.lang.Long,<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&gt; pendingCheckpoints</pre>
<div class="block">Map from checkpoint ID to the pending checkpoint</div>
</li>
</ul>
<a name="completedCheckpointStore">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completedCheckpointStore</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpointStore.html" title="org.apache.flink.runtime.checkpoint中的接口">CompletedCheckpointStore</a> completedCheckpointStore</pre>
<div class="block">Completed checkpoints. Implementations can be blocking. Make sure calls to methods
 accessing this don't block the job manager actor and run asynchronously.</div>
</li>
</ul>
<a name="checkpointDirectory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointDirectory</h4>
<pre>@Nullable
private final&nbsp;java.lang.String checkpointDirectory</pre>
<div class="block">Default directory for persistent checkpoints; <code>null</code> if none configured.
 THIS WILL BE REPLACED BY PROPER STATE-BACKEND METADATA WRITING</div>
</li>
</ul>
<a name="recentPendingCheckpoints">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recentPendingCheckpoints</h4>
<pre>private final&nbsp;java.util.ArrayDeque&lt;java.lang.Long&gt; recentPendingCheckpoints</pre>
<div class="block">A list of recent checkpoint IDs, to identify late messages (vs invalid ones)</div>
</li>
</ul>
<a name="checkpointIdCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointIdCounter</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointIDCounter.html" title="org.apache.flink.runtime.checkpoint中的接口">CheckpointIDCounter</a> checkpointIdCounter</pre>
<div class="block">Checkpoint ID counter to ensure ascending IDs. In case of job manager failures, these
 need to be ascending across job managers.</div>
</li>
</ul>
<a name="baseInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>baseInterval</h4>
<pre>private final&nbsp;long baseInterval</pre>
<div class="block">The base checkpoint interval. Actual trigger time may be affected by the
 max concurrent checkpoints and minimum-pause values</div>
</li>
</ul>
<a name="checkpointTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointTimeout</h4>
<pre>private final&nbsp;long checkpointTimeout</pre>
<div class="block">The max time (in ms) that a checkpoint may take</div>
</li>
</ul>
<a name="minPauseBetweenCheckpointsNanos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minPauseBetweenCheckpointsNanos</h4>
<pre>private final&nbsp;long minPauseBetweenCheckpointsNanos</pre>
<div class="block">The min time(in ms) to delay after a checkpoint could be triggered. Allows to
 enforce minimum processing time between checkpoint attempts</div>
</li>
</ul>
<a name="maxConcurrentCheckpointAttempts">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxConcurrentCheckpointAttempts</h4>
<pre>private final&nbsp;int maxConcurrentCheckpointAttempts</pre>
<div class="block">The maximum number of checkpoints that may be in progress at the same time</div>
</li>
</ul>
<a name="timer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timer</h4>
<pre>private final&nbsp;java.util.concurrent.ScheduledThreadPoolExecutor timer</pre>
<div class="block">The timer that handles the checkpoint timeouts and triggers periodic checkpoints</div>
</li>
</ul>
<a name="masterHooks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>masterHooks</h4>
<pre>private final&nbsp;java.util.HashMap&lt;java.lang.String,<a href="../../../../../org/apache/flink/runtime/checkpoint/MasterTriggerRestoreHook.html" title="org.apache.flink.runtime.checkpoint中的接口">MasterTriggerRestoreHook</a>&lt;?&gt;&gt; masterHooks</pre>
<div class="block">The master checkpoint hooks executed by this checkpoint coordinator</div>
</li>
</ul>
<a name="jobStatusListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jobStatusListener</h4>
<pre>private&nbsp;<a href="../../../../../org/apache/flink/runtime/executiongraph/JobStatusListener.html" title="org.apache.flink.runtime.executiongraph中的接口">JobStatusListener</a> jobStatusListener</pre>
<div class="block">Actor that receives status updates from the execution graph this coordinator works for</div>
</li>
</ul>
<a name="numUnsuccessfulCheckpointsTriggers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numUnsuccessfulCheckpointsTriggers</h4>
<pre>private final&nbsp;java.util.concurrent.atomic.AtomicInteger numUnsuccessfulCheckpointsTriggers</pre>
<div class="block">The number of consecutive failed trigger attempts</div>
</li>
</ul>
<a name="currentPeriodicTrigger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentPeriodicTrigger</h4>
<pre>private&nbsp;java.util.concurrent.ScheduledFuture&lt;?&gt; currentPeriodicTrigger</pre>
<div class="block">A handle to the current periodic trigger, to cancel it when necessary</div>
</li>
</ul>
<a name="lastCheckpointCompletionNanos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastCheckpointCompletionNanos</h4>
<pre>private&nbsp;long lastCheckpointCompletionNanos</pre>
<div class="block">The timestamp (via <code>System.nanoTime()</code>) when the last checkpoint completed</div>
</li>
</ul>
<a name="periodicScheduling">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>periodicScheduling</h4>
<pre>private&nbsp;boolean periodicScheduling</pre>
<div class="block">Flag whether a triggered checkpoint should immediately schedule the next checkpoint.
 Non-volatile, because only accessed in synchronized scope</div>
</li>
</ul>
<a name="triggerRequestQueued">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerRequestQueued</h4>
<pre>private&nbsp;boolean triggerRequestQueued</pre>
<div class="block">Flag whether a trigger request could not be handled immediately. Non-volatile, because only
 accessed in synchronized scope</div>
</li>
</ul>
<a name="shutdown">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>private volatile&nbsp;boolean shutdown</pre>
<div class="block">Flag marking the coordinator as shut down (not accepting any messages any more)</div>
</li>
</ul>
<a name="statsTracker">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statsTracker</h4>
<pre>@Nullable
private&nbsp;<a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointStatsTracker.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointStatsTracker</a> statsTracker</pre>
<div class="block">Optional tracker for checkpoint statistics.</div>
</li>
</ul>
<a name="sharedStateRegistryFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sharedStateRegistryFactory</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/flink/runtime/state/SharedStateRegistryFactory.html" title="org.apache.flink.runtime.state中的接口">SharedStateRegistryFactory</a> sharedStateRegistryFactory</pre>
<div class="block">A factory for SharedStateRegistry objects</div>
</li>
</ul>
<a name="sharedStateRegistry">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sharedStateRegistry</h4>
<pre>private&nbsp;<a href="../../../../../org/apache/flink/runtime/state/SharedStateRegistry.html" title="org.apache.flink.runtime.state中的类">SharedStateRegistry</a> sharedStateRegistry</pre>
<div class="block">Registry that tracks state which is shared across (incremental) checkpoints</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="CheckpointCoordinator-org.apache.flink.api.common.JobID-long-long-long-int-org.apache.flink.runtime.jobgraph.tasks.ExternalizedCheckpointSettings-org.apache.flink.runtime.executiongraph.ExecutionVertex:A-org.apache.flink.runtime.executiongraph.ExecutionVertex:A-org.apache.flink.runtime.executiongraph.ExecutionVertex:A-org.apache.flink.runtime.checkpoint.CheckpointIDCounter-org.apache.flink.runtime.checkpoint.CompletedCheckpointStore-java.lang.String-java.util.concurrent.Executor-org.apache.flink.runtime.state.SharedStateRegistryFactory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CheckpointCoordinator</h4>
<pre>public&nbsp;CheckpointCoordinator(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;job,
                             long&nbsp;baseInterval,
                             long&nbsp;checkpointTimeout,
                             long&nbsp;minPauseBetweenCheckpoints,
                             int&nbsp;maxConcurrentCheckpointAttempts,
                             <a href="../../../../../org/apache/flink/runtime/jobgraph/tasks/ExternalizedCheckpointSettings.html" title="org.apache.flink.runtime.jobgraph.tasks中的类">ExternalizedCheckpointSettings</a>&nbsp;externalizeSettings,
                             <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]&nbsp;tasksToTrigger,
                             <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]&nbsp;tasksToWaitFor,
                             <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionVertex</a>[]&nbsp;tasksToCommitTo,
                             <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointIDCounter.html" title="org.apache.flink.runtime.checkpoint中的接口">CheckpointIDCounter</a>&nbsp;checkpointIDCounter,
                             <a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpointStore.html" title="org.apache.flink.runtime.checkpoint中的接口">CompletedCheckpointStore</a>&nbsp;completedCheckpointStore,
                             @Nullable
                             java.lang.String&nbsp;checkpointDirectory,
                             java.util.concurrent.Executor&nbsp;executor,
                             <a href="../../../../../org/apache/flink/runtime/state/SharedStateRegistryFactory.html" title="org.apache.flink.runtime.state中的接口">SharedStateRegistryFactory</a>&nbsp;sharedStateRegistryFactory)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="addMasterHook-org.apache.flink.runtime.checkpoint.MasterTriggerRestoreHook-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addMasterHook</h4>
<pre>public&nbsp;boolean&nbsp;addMasterHook(<a href="../../../../../org/apache/flink/runtime/checkpoint/MasterTriggerRestoreHook.html" title="org.apache.flink.runtime.checkpoint中的接口">MasterTriggerRestoreHook</a>&lt;?&gt;&nbsp;hook)</pre>
<div class="block">Adds the given master hook to the checkpoint coordinator. This method does nothing, if
 the checkpoint coordinator already contained a hook with the same ID (as defined via
 <a href="../../../../../org/apache/flink/runtime/checkpoint/MasterTriggerRestoreHook.html#getIdentifier--"><code>MasterTriggerRestoreHook.getIdentifier()</code></a>).</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>hook</code> - The hook to add.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>True, if the hook was added, false if the checkpoint coordinator already
         contained a hook with the same ID.</dd>
</dl>
</li>
</ul>
<a name="getNumberOfRegisteredMasterHooks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfRegisteredMasterHooks</h4>
<pre>public&nbsp;int&nbsp;getNumberOfRegisteredMasterHooks()</pre>
<div class="block">Gets the number of currently register master hooks.</div>
</li>
</ul>
<a name="setCheckpointStatsTracker-org.apache.flink.runtime.checkpoint.CheckpointStatsTracker-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckpointStatsTracker</h4>
<pre>public&nbsp;void&nbsp;setCheckpointStatsTracker(@Nullable
                                      <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointStatsTracker.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointStatsTracker</a>&nbsp;statsTracker)</pre>
<div class="block">Sets the checkpoint stats tracker.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>statsTracker</code> - The checkpoint stats tracker.</dd>
</dl>
</li>
</ul>
<a name="shutdown-org.apache.flink.runtime.jobgraph.JobStatus-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown(<a href="../../../../../org/apache/flink/runtime/jobgraph/JobStatus.html" title="org.apache.flink.runtime.jobgraph中的枚举">JobStatus</a>&nbsp;jobStatus)
              throws java.lang.Exception</pre>
<div class="block">Shuts down the checkpoint coordinator.

 <p>After this method has been called, the coordinator does not accept
 and further messages and cannot trigger any further checkpoints.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="isShutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShutdown</h4>
<pre>public&nbsp;boolean&nbsp;isShutdown()</pre>
</li>
</ul>
<a name="triggerSavepoint-long-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerSavepoint</h4>
<pre>public&nbsp;java.util.concurrent.CompletableFuture&lt;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">CompletedCheckpoint</a>&gt;&nbsp;triggerSavepoint(long&nbsp;timestamp,
                                                                                    java.lang.String&nbsp;targetDirectory)
                                                                             throws java.lang.Exception</pre>
<div class="block">Triggers a savepoint with the given savepoint directory as a target.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>timestamp</code> - The timestamp for the savepoint.</dd>
<dd><code>targetDirectory</code> - Target directory for the savepoint.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>A future to the completed checkpoint</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If no savepoint directory has been
                               specified and no default savepoint directory has been
                               configured</dd>
<dd><code>java.lang.Exception</code> - Failures during triggering are forwarded</dd>
</dl>
</li>
</ul>
<a name="triggerCheckpoint-long-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerCheckpoint</h4>
<pre>public&nbsp;boolean&nbsp;triggerCheckpoint(long&nbsp;timestamp,
                                 boolean&nbsp;isPeriodic)</pre>
<div class="block">Triggers a new standard checkpoint and uses the given timestamp as the checkpoint
 timestamp.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>timestamp</code> - The timestamp for the checkpoint.</dd>
<dd><code>isPeriodic</code> - Flag indicating whether this triggered checkpoint is
 periodic. If this flag is true, but the periodic scheduler is disabled,
 the checkpoint will be declined.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if triggering the checkpoint succeeded.</dd>
</dl>
</li>
</ul>
<a name="triggerCheckpoint-long-org.apache.flink.runtime.checkpoint.CheckpointOptions-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerCheckpoint</h4>
<pre><a href="../../../../../org/apache/flink/annotation/VisibleForTesting.html" title="org.apache.flink.annotation中的注释">@VisibleForTesting</a>
 <a href="../../../../../org/apache/flink/annotation/Internal.html" title="org.apache.flink.annotation中的注释">@Internal</a>
public&nbsp;java.util.concurrent.CompletableFuture&lt;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">CompletedCheckpoint</a>&gt;&nbsp;triggerCheckpoint(long&nbsp;timestamp,
                                                                                                                   <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointOptions.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointOptions</a>&nbsp;options)
                                                                                                            throws java.lang.Exception</pre>
<div class="block">Test method to trigger a checkpoint/savepoint.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>timestamp</code> - The timestamp for the checkpoint.</dd>
<dd><code>options</code> - The checkpoint options.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>A future to the completed checkpoint</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="triggerCheckpoint-long-org.apache.flink.runtime.checkpoint.CheckpointProperties-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerCheckpoint</h4>
<pre><a href="../../../../../org/apache/flink/annotation/VisibleForTesting.html" title="org.apache.flink.annotation中的注释">@VisibleForTesting</a>
<a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointTriggerResult.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointTriggerResult</a>&nbsp;triggerCheckpoint(long&nbsp;timestamp,
                                                             <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointProperties.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointProperties</a>&nbsp;props,
                                                             java.lang.String&nbsp;targetDirectory,
                                                             boolean&nbsp;isPeriodic)</pre>
</li>
</ul>
<a name="receiveDeclineMessage-org.apache.flink.runtime.messages.checkpoint.DeclineCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveDeclineMessage</h4>
<pre>public&nbsp;void&nbsp;receiveDeclineMessage(<a href="../../../../../org/apache/flink/runtime/messages/checkpoint/DeclineCheckpoint.html" title="org.apache.flink.runtime.messages.checkpoint中的类">DeclineCheckpoint</a>&nbsp;message)</pre>
<div class="block">Receives a <a href="../../../../../org/apache/flink/runtime/messages/checkpoint/DeclineCheckpoint.html" title="org.apache.flink.runtime.messages.checkpoint中的类"><code>DeclineCheckpoint</code></a> message for a pending checkpoint.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>message</code> - Checkpoint decline from the task manager</dd>
</dl>
</li>
</ul>
<a name="receiveAcknowledgeMessage-org.apache.flink.runtime.messages.checkpoint.AcknowledgeCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAcknowledgeMessage</h4>
<pre>public&nbsp;boolean&nbsp;receiveAcknowledgeMessage(<a href="../../../../../org/apache/flink/runtime/messages/checkpoint/AcknowledgeCheckpoint.html" title="org.apache.flink.runtime.messages.checkpoint中的类">AcknowledgeCheckpoint</a>&nbsp;message)
                                  throws <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointException.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointException</a></pre>
<div class="block">Receives an AcknowledgeCheckpoint message and returns whether the
 message was associated with a pending checkpoint.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>message</code> - Checkpoint ack from the task manager</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>Flag indicating whether the ack'd checkpoint was associated
 with a pending checkpoint.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointException.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointException</a></code> - If the checkpoint cannot be added to the completed checkpoint store.</dd>
</dl>
</li>
</ul>
<a name="completePendingCheckpoint-org.apache.flink.runtime.checkpoint.PendingCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completePendingCheckpoint</h4>
<pre>private&nbsp;void&nbsp;completePendingCheckpoint(<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&nbsp;pendingCheckpoint)
                                throws <a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointException.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointException</a></pre>
<div class="block">Try to complete the given pending checkpoint.

 Important: This method should only be called in the checkpoint lock scope.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>pendingCheckpoint</code> - to complete</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointException.html" title="org.apache.flink.runtime.checkpoint中的类">CheckpointException</a></code> - if the completion failed</dd>
</dl>
</li>
</ul>
<a name="failUnacknowledgedPendingCheckpointsFor-org.apache.flink.runtime.executiongraph.ExecutionAttemptID-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>failUnacknowledgedPendingCheckpointsFor</h4>
<pre>public&nbsp;void&nbsp;failUnacknowledgedPendingCheckpointsFor(<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionAttemptID.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionAttemptID</a>&nbsp;executionAttemptId,
                                                    java.lang.Throwable&nbsp;cause)</pre>
<div class="block">Fails all pending checkpoints which have not been acknowledged by the given execution
 attempt id.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>executionAttemptId</code> - for which to discard unaknowledged pending checkpoints</dd>
<dd><code>cause</code> - of the failure</dd>
</dl>
</li>
</ul>
<a name="rememberRecentCheckpointId-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rememberRecentCheckpointId</h4>
<pre>private&nbsp;void&nbsp;rememberRecentCheckpointId(long&nbsp;id)</pre>
</li>
</ul>
<a name="dropSubsumedCheckpoints-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropSubsumedCheckpoints</h4>
<pre>private&nbsp;void&nbsp;dropSubsumedCheckpoints(long&nbsp;checkpointId)</pre>
</li>
</ul>
<a name="triggerQueuedRequests--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerQueuedRequests</h4>
<pre>private&nbsp;void&nbsp;triggerQueuedRequests()</pre>
<div class="block">Triggers the queued request, if there is one.

 <p>NOTE: The caller of this method must hold the lock when invoking the method!</div>
</li>
</ul>
<a name="getNumScheduledTasks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumScheduledTasks</h4>
<pre><a href="../../../../../org/apache/flink/annotation/VisibleForTesting.html" title="org.apache.flink.annotation中的注释">@VisibleForTesting</a>
int&nbsp;getNumScheduledTasks()</pre>
</li>
</ul>
<a name="restoreLatestCheckpointedState-java.util.Map-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreLatestCheckpointedState</h4>
<pre>public&nbsp;boolean&nbsp;restoreLatestCheckpointedState(java.util.Map&lt;<a href="../../../../../org/apache/flink/runtime/jobgraph/JobVertexID.html" title="org.apache.flink.runtime.jobgraph中的类">JobVertexID</a>,<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionJobVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionJobVertex</a>&gt;&nbsp;tasks,
                                              boolean&nbsp;errorIfNoCheckpoint,
                                              boolean&nbsp;allowNonRestoredState)
                                       throws java.lang.Exception</pre>
<div class="block">Restores the latest checkpointed state.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>tasks</code> - Map of job vertices to restore. State for these vertices is
 restored via <a href="../../../../../org/apache/flink/runtime/executiongraph/Execution.html#setInitialState-org.apache.flink.runtime.checkpoint.TaskStateSnapshot-"><code>Execution.setInitialState(TaskStateSnapshot)</code></a>.</dd>
<dd><code>errorIfNoCheckpoint</code> - Fail if no completed checkpoint is available to
 restore from.</dd>
<dd><code>allowNonRestoredState</code> - Allow checkpoint state that cannot be mapped
 to any job vertex in tasks.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if state was restored, <code>false</code> otherwise.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If the CheckpointCoordinator is shut down.</dd>
<dd><code>java.lang.IllegalStateException</code> - If no completed checkpoint is available and
                               the <code>failIfNoCheckpoint</code> flag has been set.</dd>
<dd><code>java.lang.IllegalStateException</code> - If the checkpoint contains state that cannot be
                               mapped to any job vertex in <code>tasks</code> and the
                               <code>allowNonRestoredState</code> flag has not been set.</dd>
<dd><code>java.lang.IllegalStateException</code> - If the max parallelism changed for an operator
                               that restores state from this checkpoint.</dd>
<dd><code>java.lang.IllegalStateException</code> - If the parallelism changed for an operator
                               that restores <i>non-partitioned</i> state from this
                               checkpoint.</dd>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="restoreSavepoint-java.lang.String-boolean-java.util.Map-java.lang.ClassLoader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreSavepoint</h4>
<pre>public&nbsp;boolean&nbsp;restoreSavepoint(java.lang.String&nbsp;savepointPath,
                                boolean&nbsp;allowNonRestored,
                                java.util.Map&lt;<a href="../../../../../org/apache/flink/runtime/jobgraph/JobVertexID.html" title="org.apache.flink.runtime.jobgraph中的类">JobVertexID</a>,<a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionJobVertex.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionJobVertex</a>&gt;&nbsp;tasks,
                                java.lang.ClassLoader&nbsp;userClassLoader)
                         throws java.lang.Exception</pre>
<div class="block">Restore the state with given savepoint</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>savepointPath</code> - Location of the savepoint</dd>
<dd><code>allowNonRestored</code> - True if allowing checkpoint state that cannot be 
                         mapped to any job vertex in tasks.</dd>
<dd><code>tasks</code> - Map of job vertices to restore. State for these 
                         vertices is restored via 
                         <a href="../../../../../org/apache/flink/runtime/executiongraph/Execution.html#setInitialState-org.apache.flink.runtime.checkpoint.TaskStateSnapshot-"><code>Execution.setInitialState(TaskStateSnapshot)</code></a>.</dd>
<dd><code>userClassLoader</code> - The class loader to resolve serialized classes in 
                         legacy savepoint versions.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="getNumberOfPendingCheckpoints--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfPendingCheckpoints</h4>
<pre>public&nbsp;int&nbsp;getNumberOfPendingCheckpoints()</pre>
</li>
</ul>
<a name="getNumberOfRetainedSuccessfulCheckpoints--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfRetainedSuccessfulCheckpoints</h4>
<pre>public&nbsp;int&nbsp;getNumberOfRetainedSuccessfulCheckpoints()</pre>
</li>
</ul>
<a name="getPendingCheckpoints--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPendingCheckpoints</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.Long,<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&gt;&nbsp;getPendingCheckpoints()</pre>
</li>
</ul>
<a name="getSuccessfulCheckpoints--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSuccessfulCheckpoints</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">CompletedCheckpoint</a>&gt;&nbsp;getSuccessfulCheckpoints()
                                                             throws java.lang.Exception</pre>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="getCheckpointStore--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointStore</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/flink/runtime/checkpoint/CompletedCheckpointStore.html" title="org.apache.flink.runtime.checkpoint中的接口">CompletedCheckpointStore</a>&nbsp;getCheckpointStore()</pre>
</li>
</ul>
<a name="getCheckpointIdCounter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointIdCounter</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointIDCounter.html" title="org.apache.flink.runtime.checkpoint中的接口">CheckpointIDCounter</a>&nbsp;getCheckpointIdCounter()</pre>
</li>
</ul>
<a name="getCheckpointTimeout--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointTimeout</h4>
<pre>public&nbsp;long&nbsp;getCheckpointTimeout()</pre>
</li>
</ul>
<a name="isPeriodicCheckpointingConfigured--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isPeriodicCheckpointingConfigured</h4>
<pre>public&nbsp;boolean&nbsp;isPeriodicCheckpointingConfigured()</pre>
<div class="block">Returns whether periodic checkpointing has been configured.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if periodic checkpoints have been configured.</dd>
</dl>
</li>
</ul>
<a name="startCheckpointScheduler--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startCheckpointScheduler</h4>
<pre>public&nbsp;void&nbsp;startCheckpointScheduler()</pre>
</li>
</ul>
<a name="stopCheckpointScheduler--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopCheckpointScheduler</h4>
<pre>public&nbsp;void&nbsp;stopCheckpointScheduler()</pre>
</li>
</ul>
<a name="createActivatorDeactivator--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createActivatorDeactivator</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/flink/runtime/executiongraph/JobStatusListener.html" title="org.apache.flink.runtime.executiongraph中的接口">JobStatusListener</a>&nbsp;createActivatorDeactivator()</pre>
</li>
</ul>
<a name="discardCheckpoint-org.apache.flink.runtime.checkpoint.PendingCheckpoint-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>discardCheckpoint</h4>
<pre>private&nbsp;void&nbsp;discardCheckpoint(<a href="../../../../../org/apache/flink/runtime/checkpoint/PendingCheckpoint.html" title="org.apache.flink.runtime.checkpoint中的类">PendingCheckpoint</a>&nbsp;pendingCheckpoint,
                               @Nullable
                               java.lang.Throwable&nbsp;cause)</pre>
<div class="block">Discards the given pending checkpoint because of the given cause.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>pendingCheckpoint</code> - to discard</dd>
<dd><code>cause</code> - for discarding the checkpoint</dd>
</dl>
</li>
</ul>
<a name="discardSubtaskState-org.apache.flink.api.common.JobID-org.apache.flink.runtime.executiongraph.ExecutionAttemptID-long-org.apache.flink.runtime.checkpoint.TaskStateSnapshot-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>discardSubtaskState</h4>
<pre>private&nbsp;void&nbsp;discardSubtaskState(<a href="../../../../../org/apache/flink/api/common/JobID.html" title="org.apache.flink.api.common中的类">JobID</a>&nbsp;jobId,
                                 <a href="../../../../../org/apache/flink/runtime/executiongraph/ExecutionAttemptID.html" title="org.apache.flink.runtime.executiongraph中的类">ExecutionAttemptID</a>&nbsp;executionAttemptID,
                                 long&nbsp;checkpointId,
                                 <a href="../../../../../org/apache/flink/runtime/checkpoint/TaskStateSnapshot.html" title="org.apache.flink.runtime.checkpoint中的类">TaskStateSnapshot</a>&nbsp;subtaskState)</pre>
<div class="block">Discards the given state object asynchronously belonging to the given job, execution attempt
 id and checkpoint id.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>jobId</code> - identifying the job to which the state object belongs</dd>
<dd><code>executionAttemptID</code> - identifying the task to which the state object belongs</dd>
<dd><code>checkpointId</code> - of the state object</dd>
<dd><code>subtaskState</code> - to discard asynchronously</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/flink/runtime/checkpoint/AbstractCheckpointStats.html" title="org.apache.flink.runtime.checkpoint中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/flink/runtime/checkpoint/CheckpointCoordinator.ScheduledTrigger.html" title="org.apache.flink.runtime.checkpoint中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/flink/runtime/checkpoint/CheckpointCoordinator.html" target="_top">框架</a></li>
<li><a href="CheckpointCoordinator.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
