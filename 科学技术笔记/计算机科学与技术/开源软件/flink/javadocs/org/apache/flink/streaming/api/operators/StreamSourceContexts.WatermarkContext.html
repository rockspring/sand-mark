<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_144) on Thu May 17 13:42:27 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>StreamSourceContexts.WatermarkContext</title>
<meta name="date" content="2018-05-17">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StreamSourceContexts.WatermarkContext";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":6,"i9":6,"i10":6,"i11":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],4:["t3","抽象方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.NonTimestampContext.html" title="org.apache.flink.streaming.api.operators中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.IdlenessDetectionTask.html" title="org.apache.flink.streaming.api.operators中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" target="_top">框架</a></li>
<li><a href="StreamSourceContexts.WatermarkContext.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.flink.streaming.api.operators</div>
<h2 title="类 StreamSourceContexts.WatermarkContext" class="title">类 StreamSourceContexts.WatermarkContext&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.flink.streaming.api.operators.StreamSourceContexts.WatermarkContext&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;T&gt;</dd>
</dl>
<dl>
<dt>直接已知子类:</dt>
<dd><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.AutomaticWatermarkContext.html" title="org.apache.flink.streaming.api.operators中的类">StreamSourceContexts.AutomaticWatermarkContext</a>, <a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.ManualWatermarkContext.html" title="org.apache.flink.streaming.api.operators中的类">StreamSourceContexts.ManualWatermarkContext</a></dd>
</dl>
<dl>
<dt>封闭类:</dt>
<dd><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.html" title="org.apache.flink.streaming.api.operators中的类">StreamSourceContexts</a></dd>
</dl>
<hr>
<br>
<pre>private abstract static class <span class="typeNameLabel">StreamSourceContexts.WatermarkContext&lt;T&gt;</span>
extends java.lang.Object
implements <a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;T&gt;</pre>
<div class="block">An abstract <code>SourceFunction.SourceContext</code> that should be used as the base for
 stream source contexts that are relevant with <a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类"><code>Watermark</code></a>s.

 <p>Stream source contexts that are relevant with watermarks are responsible of manipulating
 the current <a href="../../../../../../org/apache/flink/streaming/runtime/streamstatus/StreamStatus.html" title="org.apache.flink.streaming.runtime.streamstatus中的类"><code>StreamStatus</code></a>, so that stream status can be correctly propagated
 downstream. Please refer to the class-level documentation of <a href="../../../../../../org/apache/flink/streaming/runtime/streamstatus/StreamStatus.html" title="org.apache.flink.streaming.runtime.streamstatus中的类"><code>StreamStatus</code></a> for
 information on how stream status affects watermark advancement at downstream tasks.

 <p>This class implements the logic of idleness detection. It fires idleness detection
 tasks at a given interval; if no records or watermarks were collected by the source context
 between 2 consecutive checks, it determines the source to be IDLE and correspondingly
 toggles the status. ACTIVE status resumes as soon as some record or watermark is collected
 again.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">类和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.IdlenessDetectionTask.html" title="org.apache.flink.streaming.api.operators中的类">StreamSourceContexts.WatermarkContext.IdlenessDetectionTask</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="字段概要表, 列表字段和解释">
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">字段和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#checkpointLock">checkpointLock</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#failOnNextCheck">failOnNextCheck</a></span></code>
<div class="block">This flag will be reset to <code>true</code> every time the next check is scheduled.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#idleTimeout">idleTimeout</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.concurrent.ScheduledFuture&lt;?&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#nextCheck">nextCheck</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/flink/streaming/runtime/streamstatus/StreamStatusMaintainer.html" title="org.apache.flink.streaming.runtime.streamstatus中的接口">StreamStatusMaintainer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#streamStatusMaintainer">streamStatusMaintainer</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/flink/streaming/runtime/tasks/ProcessingTimeService.html" title="org.apache.flink.streaming.runtime.tasks中的类">ProcessingTimeService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#timeService">timeService</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#WatermarkContext-org.apache.flink.streaming.runtime.tasks.ProcessingTimeService-java.lang.Object-org.apache.flink.streaming.runtime.streamstatus.StreamStatusMaintainer-long-">WatermarkContext</a></span>(<a href="../../../../../../org/apache/flink/streaming/runtime/tasks/ProcessingTimeService.html" title="org.apache.flink.streaming.runtime.tasks中的类">ProcessingTimeService</a>&nbsp;timeService,
                java.lang.Object&nbsp;checkpointLock,
                <a href="../../../../../../org/apache/flink/streaming/runtime/streamstatus/StreamStatusMaintainer.html" title="org.apache.flink.streaming.runtime.streamstatus中的接口">StreamStatusMaintainer</a>&nbsp;streamStatusMaintainer,
                long&nbsp;idleTimeout)</code>
<div class="block">Create a watermark context.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">抽象方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#allowWatermark-org.apache.flink.streaming.api.watermark.Watermark-">allowWatermark</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类">Watermark</a>&nbsp;mark)</code>
<div class="block">Whether or not a watermark should be allowed.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#cancelNextIdleDetectionTask--">cancelNextIdleDetectionTask</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#close--">close</a></span>()</code>
<div class="block">This method is called by the system to shut down the context.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#collect-T-">collect</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element)</code>
<div class="block">Emits one element from the source, without attaching a timestamp.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#collectWithTimestamp-T-long-">collectWithTimestamp</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element,
                    long&nbsp;timestamp)</code>
<div class="block">Emits one element from the source, and attaches the given timestamp.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#emitWatermark-org.apache.flink.streaming.api.watermark.Watermark-">emitWatermark</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类">Watermark</a>&nbsp;mark)</code>
<div class="block">Emits the given <a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类"><code>Watermark</code></a>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#getCheckpointLock--">getCheckpointLock</a></span>()</code>
<div class="block">Returns the checkpoint lock.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#markAsTemporarilyIdle--">markAsTemporarilyIdle</a></span>()</code>
<div class="block">Marks the source to be temporarily idle.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#processAndCollect-T-">processAndCollect</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element)</code>
<div class="block">Process and collect record.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#processAndCollectWithTimestamp-T-long-">processAndCollectWithTimestamp</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element,
                              long&nbsp;timestamp)</code>
<div class="block">Process and collect record with timestamp.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#processAndEmitWatermark-org.apache.flink.streaming.api.watermark.Watermark-">processAndEmitWatermark</a></span>(<a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类">Watermark</a>&nbsp;mark)</code>
<div class="block">Process and emit watermark.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#scheduleNextIdleDetectionTask--">scheduleNextIdleDetectionTask</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a name="timeService">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeService</h4>
<pre>protected final&nbsp;<a href="../../../../../../org/apache/flink/streaming/runtime/tasks/ProcessingTimeService.html" title="org.apache.flink.streaming.runtime.tasks中的类">ProcessingTimeService</a> timeService</pre>
</li>
</ul>
<a name="checkpointLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointLock</h4>
<pre>protected final&nbsp;java.lang.Object checkpointLock</pre>
</li>
</ul>
<a name="streamStatusMaintainer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>streamStatusMaintainer</h4>
<pre>protected final&nbsp;<a href="../../../../../../org/apache/flink/streaming/runtime/streamstatus/StreamStatusMaintainer.html" title="org.apache.flink.streaming.runtime.streamstatus中的接口">StreamStatusMaintainer</a> streamStatusMaintainer</pre>
</li>
</ul>
<a name="idleTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>idleTimeout</h4>
<pre>protected final&nbsp;long idleTimeout</pre>
</li>
</ul>
<a name="nextCheck">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextCheck</h4>
<pre>private&nbsp;java.util.concurrent.ScheduledFuture&lt;?&gt; nextCheck</pre>
</li>
</ul>
<a name="failOnNextCheck">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>failOnNextCheck</h4>
<pre>private volatile&nbsp;boolean failOnNextCheck</pre>
<div class="block">This flag will be reset to <code>true</code> every time the next check is scheduled.
 Whenever a record or watermark is collected, the flag will be set to <code>false</code>.

 <p>When the scheduled check is fired, if the flag remains to be <code>true</code>, the check
 will fail, and our current status will determined to be IDLE.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="WatermarkContext-org.apache.flink.streaming.runtime.tasks.ProcessingTimeService-java.lang.Object-org.apache.flink.streaming.runtime.streamstatus.StreamStatusMaintainer-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WatermarkContext</h4>
<pre>public&nbsp;WatermarkContext(<a href="../../../../../../org/apache/flink/streaming/runtime/tasks/ProcessingTimeService.html" title="org.apache.flink.streaming.runtime.tasks中的类">ProcessingTimeService</a>&nbsp;timeService,
                        java.lang.Object&nbsp;checkpointLock,
                        <a href="../../../../../../org/apache/flink/streaming/runtime/streamstatus/StreamStatusMaintainer.html" title="org.apache.flink.streaming.runtime.streamstatus中的接口">StreamStatusMaintainer</a>&nbsp;streamStatusMaintainer,
                        long&nbsp;idleTimeout)</pre>
<div class="block">Create a watermark context.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>timeService</code> - the time service to schedule idleness detection tasks</dd>
<dd><code>checkpointLock</code> - the checkpoint lock</dd>
<dd><code>streamStatusMaintainer</code> - the stream status maintainer to toggle and retrieve current status</dd>
<dd><code>idleTimeout</code> - (-1 if idleness checking is disabled)</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="collect-java.lang.Object-">
<!--   -->
</a><a name="collect-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>collect</h4>
<pre>public&nbsp;void&nbsp;collect(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element)</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#collect-T-">SourceFunction.SourceContext</a></code></span></div>
<div class="block">Emits one element from the source, without attaching a timestamp. In most cases,
 this is the default way of emitting elements.

 <p>The timestamp that the element will get assigned depends on the time characteristic of
 the streaming program:
 <ul>
     <li>On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#ProcessingTime"><code>TimeCharacteristic.ProcessingTime</code></a>, the element has no timestamp.</li>
     <li>On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#IngestionTime"><code>TimeCharacteristic.IngestionTime</code></a>, the element gets the system's
         current time as the timestamp.</li>
     <li>On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#EventTime"><code>TimeCharacteristic.EventTime</code></a>, the element will have no timestamp initially.
         It needs to get a timestamp (via a <a href="../../../../../../org/apache/flink/streaming/api/functions/TimestampAssigner.html" title="org.apache.flink.streaming.api.functions中的接口"><code>TimestampAssigner</code></a>) before any time-dependent
         operation (like time windows).</li>
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#collect-T-">collect</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&gt;</code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>element</code> - The element to emit</dd>
</dl>
</li>
</ul>
<a name="collectWithTimestamp-java.lang.Object-long-">
<!--   -->
</a><a name="collectWithTimestamp-T-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>collectWithTimestamp</h4>
<pre>public&nbsp;void&nbsp;collectWithTimestamp(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element,
                                 long&nbsp;timestamp)</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#collectWithTimestamp-T-long-">SourceFunction.SourceContext</a></code></span></div>
<div class="block">Emits one element from the source, and attaches the given timestamp. This method
 is relevant for programs using <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#EventTime"><code>TimeCharacteristic.EventTime</code></a>, where the
 sources assign timestamps themselves, rather than relying on a <a href="../../../../../../org/apache/flink/streaming/api/functions/TimestampAssigner.html" title="org.apache.flink.streaming.api.functions中的接口"><code>TimestampAssigner</code></a>
 on the stream.

 <p>On certain time characteristics, this timestamp may be ignored or overwritten.
 This allows programs to switch between the different time characteristics and behaviors
 without changing the code of the source functions.
 <ul>
     <li>On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#ProcessingTime"><code>TimeCharacteristic.ProcessingTime</code></a>, the timestamp will be ignored,
         because processing time never works with element timestamps.</li>
     <li>On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#IngestionTime"><code>TimeCharacteristic.IngestionTime</code></a>, the timestamp is overwritten with the
         system's current time, to realize proper ingestion time semantics.</li>
     <li>On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#EventTime"><code>TimeCharacteristic.EventTime</code></a>, the timestamp will be used.</li>
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#collectWithTimestamp-T-long-">collectWithTimestamp</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&gt;</code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>element</code> - The element to emit</dd>
<dd><code>timestamp</code> - The timestamp in milliseconds since the Epoch</dd>
</dl>
</li>
</ul>
<a name="emitWatermark-org.apache.flink.streaming.api.watermark.Watermark-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>emitWatermark</h4>
<pre>public&nbsp;void&nbsp;emitWatermark(<a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类">Watermark</a>&nbsp;mark)</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#emitWatermark-org.apache.flink.streaming.api.watermark.Watermark-">SourceFunction.SourceContext</a></code></span></div>
<div class="block">Emits the given <a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类"><code>Watermark</code></a>. A Watermark of value <code>t</code> declares that no
 elements with a timestamp <code>t' &lt;= t</code> will occur any more. If further such
 elements will be emitted, those elements are considered <i>late</i>.

 <p>This method is only relevant when running on <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#EventTime"><code>TimeCharacteristic.EventTime</code></a>.
 On <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#ProcessingTime"><code>TimeCharacteristic.ProcessingTime</code></a>,Watermarks will be ignored. On
 <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#IngestionTime"><code>TimeCharacteristic.IngestionTime</code></a>, the Watermarks will be replaced by the
 automatic ingestion time watermarks.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#emitWatermark-org.apache.flink.streaming.api.watermark.Watermark-">emitWatermark</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&gt;</code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>mark</code> - The Watermark to emit</dd>
</dl>
</li>
</ul>
<a name="markAsTemporarilyIdle--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markAsTemporarilyIdle</h4>
<pre>public&nbsp;void&nbsp;markAsTemporarilyIdle()</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#markAsTemporarilyIdle--">SourceFunction.SourceContext</a></code></span></div>
<div class="block">Marks the source to be temporarily idle. This tells the system that this source will
 temporarily stop emitting records and watermarks for an indefinite amount of time. This
 is only relevant when running on <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#IngestionTime"><code>TimeCharacteristic.IngestionTime</code></a> and
 <a href="../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#EventTime"><code>TimeCharacteristic.EventTime</code></a>, allowing downstream tasks to advance their
 watermarks without the need to wait for watermarks from this source while it is idle.

 <p>Source functions should make a best effort to call this method as soon as they
 acknowledge themselves to be idle. The system will consider the source to resume activity
 again once <code>SourceContext#collect(T)</code>, <code>SourceContext#collectWithTimestamp(T, long)</code>,
 or <a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#emitWatermark-org.apache.flink.streaming.api.watermark.Watermark-"><code>SourceFunction.SourceContext.emitWatermark(Watermark)</code></a> is called to emit elements or watermarks from the source.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#markAsTemporarilyIdle--">markAsTemporarilyIdle</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getCheckpointLock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointLock</h4>
<pre>public&nbsp;java.lang.Object&nbsp;getCheckpointLock()</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#getCheckpointLock--">SourceFunction.SourceContext</a></code></span></div>
<div class="block">Returns the checkpoint lock. Please refer to the class-level comment in
 <a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html" title="org.apache.flink.streaming.api.functions.source中的接口"><code>SourceFunction</code></a> for details about how to write a consistent checkpointed
 source.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#getCheckpointLock--">getCheckpointLock</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&gt;</code></dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>The object to use as the lock</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#close--">SourceFunction.SourceContext</a></code></span></div>
<div class="block">This method is called by the system to shut down the context.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html#close--">close</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="scheduleNextIdleDetectionTask--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleNextIdleDetectionTask</h4>
<pre>private&nbsp;void&nbsp;scheduleNextIdleDetectionTask()</pre>
</li>
</ul>
<a name="cancelNextIdleDetectionTask--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelNextIdleDetectionTask</h4>
<pre>protected&nbsp;void&nbsp;cancelNextIdleDetectionTask()</pre>
</li>
</ul>
<a name="processAndCollect-java.lang.Object-">
<!--   -->
</a><a name="processAndCollect-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processAndCollect</h4>
<pre>protected abstract&nbsp;void&nbsp;processAndCollect(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element)</pre>
<div class="block">Process and collect record.</div>
</li>
</ul>
<a name="processAndCollectWithTimestamp-java.lang.Object-long-">
<!--   -->
</a><a name="processAndCollectWithTimestamp-T-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processAndCollectWithTimestamp</h4>
<pre>protected abstract&nbsp;void&nbsp;processAndCollectWithTimestamp(<a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" title="StreamSourceContexts.WatermarkContext中的类型参数">T</a>&nbsp;element,
                                                       long&nbsp;timestamp)</pre>
<div class="block">Process and collect record with timestamp.</div>
</li>
</ul>
<a name="allowWatermark-org.apache.flink.streaming.api.watermark.Watermark-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allowWatermark</h4>
<pre>protected abstract&nbsp;boolean&nbsp;allowWatermark(<a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类">Watermark</a>&nbsp;mark)</pre>
<div class="block">Whether or not a watermark should be allowed.</div>
</li>
</ul>
<a name="processAndEmitWatermark-org.apache.flink.streaming.api.watermark.Watermark-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processAndEmitWatermark</h4>
<pre>protected abstract&nbsp;void&nbsp;processAndEmitWatermark(<a href="../../../../../../org/apache/flink/streaming/api/watermark/Watermark.html" title="org.apache.flink.streaming.api.watermark中的类">Watermark</a>&nbsp;mark)</pre>
<div class="block">Process and emit watermark. Only called if
 <a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html#allowWatermark-org.apache.flink.streaming.api.watermark.Watermark-"><code>allowWatermark(Watermark)</code></a> returns <code>true</code>.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.NonTimestampContext.html" title="org.apache.flink.streaming.api.operators中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.IdlenessDetectionTask.html" title="org.apache.flink.streaming.api.operators中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/flink/streaming/api/operators/StreamSourceContexts.WatermarkContext.html" target="_top">框架</a></li>
<li><a href="StreamSourceContexts.WatermarkContext.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
