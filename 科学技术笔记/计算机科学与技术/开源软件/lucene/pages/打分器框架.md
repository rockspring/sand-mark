索引建立时的模数通过如下方法计算

```
// org/apache/lucene/search/similarities/TFIDFSimilarity.java
public final long computeNorm(FieldInvertState state);
```

lengthNorm方法名字有误解，具体实现就是计算norm值，包含了字段的boost和字段内容的长度模lengthNorm。


这个norm值不是直接存储的，通过如下编码方法转换成成一个字节存储


```
// org/apache/lucene/search/similarities/ClassicSimilarity.java
public final long encodeNormValue(float f);
```

转换方法的实现同如下方法完成

```
// org/apache/lucene/util/SmallFloat.java
public static byte floatToByte315(float f);
```




org/apache/lucene/index/DefaultIndexingChain.java



PerField --(next)--> PerField --(next)--> null


PerField[] fieldHash

